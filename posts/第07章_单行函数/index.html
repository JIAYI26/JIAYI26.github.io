<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>单行函数 | JIAYI's Blog</title><meta name=keywords content="MySQL"><meta name=description content="第07章_单行函数 1. 函数的理解 1.1 什么是函数 函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既提高了代码效率，又提高了可维护性。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地提高用户对数据库的管理效率。
从函数定义的角度出发，我们可以将函数分成内置函数和自定义函数。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。
1.2 不同DBMS函数的差异 我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。
1.3 MySQL的内置函数及分类 MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。
MySQL提供的内置函数从实现的功能角度可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：单行函数、聚合函数（或分组函数）。
两种SQL函数
单行函数
 操作数据对象 接受参数返回一个结果 只对一行进行变换 每行返回一个结果 可以嵌套 参数可以是一列或一个值  2. 数值函数 2.1 基本函数    函数 用法     ABS(x) 返回x的绝对值   SIGN(X) 返回X的符号。正数返回1，负数返回-1，0返回0   PI() 返回圆周率的值   CEIL(x)，CEILING(x) 返回大于或等于某个值的最小整数   FLOOR(x) 返回小于或等于某个值的最大整数   LEAST(e1,e2,e3…) 返回列表中的最小值   GREATEST(e1,e2,e3…) 返回列表中的最大值   MOD(x,y) 返回X除以Y后的余数   RAND() 返回0~1的随机值   RAND(x) 返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数   ROUND(x) 返回一个对x的值进行四舍五入后，最接近于X的整数   ROUND(x,y) 返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位   TRUNCATE(x,y) 返回数字x截断为y位小数的结果   SQRT(x) 返回x的平方根。当X的值为负数时，返回NULL    举例："><meta name=author content="Me"><link rel=canonical href=https://jiayi26.github.io/posts/%E7%AC%AC07%E7%AB%A0_%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=icon type=image/png sizes=16x16 href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=icon type=image/png sizes=32x32 href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=apple-touch-icon href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=mask-icon href=https://jiayi26.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="单行函数"><meta property="og:description" content="第07章_单行函数 1. 函数的理解 1.1 什么是函数 函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既提高了代码效率，又提高了可维护性。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地提高用户对数据库的管理效率。
从函数定义的角度出发，我们可以将函数分成内置函数和自定义函数。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。
1.2 不同DBMS函数的差异 我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。
1.3 MySQL的内置函数及分类 MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。
MySQL提供的内置函数从实现的功能角度可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：单行函数、聚合函数（或分组函数）。
两种SQL函数
单行函数
 操作数据对象 接受参数返回一个结果 只对一行进行变换 每行返回一个结果 可以嵌套 参数可以是一列或一个值  2. 数值函数 2.1 基本函数    函数 用法     ABS(x) 返回x的绝对值   SIGN(X) 返回X的符号。正数返回1，负数返回-1，0返回0   PI() 返回圆周率的值   CEIL(x)，CEILING(x) 返回大于或等于某个值的最小整数   FLOOR(x) 返回小于或等于某个值的最大整数   LEAST(e1,e2,e3…) 返回列表中的最小值   GREATEST(e1,e2,e3…) 返回列表中的最大值   MOD(x,y) 返回X除以Y后的余数   RAND() 返回0~1的随机值   RAND(x) 返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数   ROUND(x) 返回一个对x的值进行四舍五入后，最接近于X的整数   ROUND(x,y) 返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位   TRUNCATE(x,y) 返回数字x截断为y位小数的结果   SQRT(x) 返回x的平方根。当X的值为负数时，返回NULL    举例："><meta property="og:type" content="article"><meta property="og:url" content="https://jiayi26.github.io/posts/%E7%AC%AC07%E7%AB%A0_%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-13T15:29:33+08:00"><meta property="article:modified_time" content="2022-12-13T15:29:33+08:00"><meta property="og:site_name" content="JIAYI's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="单行函数"><meta name=twitter:description content="第07章_单行函数 1. 函数的理解 1.1 什么是函数 函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既提高了代码效率，又提高了可维护性。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地提高用户对数据库的管理效率。
从函数定义的角度出发，我们可以将函数分成内置函数和自定义函数。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。
1.2 不同DBMS函数的差异 我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。
1.3 MySQL的内置函数及分类 MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。
MySQL提供的内置函数从实现的功能角度可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：单行函数、聚合函数（或分组函数）。
两种SQL函数
单行函数
 操作数据对象 接受参数返回一个结果 只对一行进行变换 每行返回一个结果 可以嵌套 参数可以是一列或一个值  2. 数值函数 2.1 基本函数    函数 用法     ABS(x) 返回x的绝对值   SIGN(X) 返回X的符号。正数返回1，负数返回-1，0返回0   PI() 返回圆周率的值   CEIL(x)，CEILING(x) 返回大于或等于某个值的最小整数   FLOOR(x) 返回小于或等于某个值的最大整数   LEAST(e1,e2,e3…) 返回列表中的最小值   GREATEST(e1,e2,e3…) 返回列表中的最大值   MOD(x,y) 返回X除以Y后的余数   RAND() 返回0~1的随机值   RAND(x) 返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数   ROUND(x) 返回一个对x的值进行四舍五入后，最接近于X的整数   ROUND(x,y) 返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位   TRUNCATE(x,y) 返回数字x截断为y位小数的结果   SQRT(x) 返回x的平方根。当X的值为负数时，返回NULL    举例："><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jiayi26.github.io/posts/"},{"@type":"ListItem","position":2,"name":"单行函数","item":"https://jiayi26.github.io/posts/%E7%AC%AC07%E7%AB%A0_%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"单行函数","name":"单行函数","description":"第07章_单行函数 1. 函数的理解 1.1 什么是函数 函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既提高了代码效率，又提高了可维护性。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地提高用户对数据库的管理效率。\n从函数定义的角度出发，我们可以将函数分成内置函数和自定义函数。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。\n1.2 不同DBMS函数的差异 我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。\n1.3 MySQL的内置函数及分类 MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。\nMySQL提供的内置函数从实现的功能角度可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：单行函数、聚合函数（或分组函数）。\n两种SQL函数\n单行函数\n 操作数据对象 接受参数返回一个结果 只对一行进行变换 每行返回一个结果 可以嵌套 参数可以是一列或一个值  2. 数值函数 2.1 基本函数    函数 用法     ABS(x) 返回x的绝对值   SIGN(X) 返回X的符号。正数返回1，负数返回-1，0返回0   PI() 返回圆周率的值   CEIL(x)，CEILING(x) 返回大于或等于某个值的最小整数   FLOOR(x) 返回小于或等于某个值的最大整数   LEAST(e1,e2,e3…) 返回列表中的最小值   GREATEST(e1,e2,e3…) 返回列表中的最大值   MOD(x,y) 返回X除以Y后的余数   RAND() 返回0~1的随机值   RAND(x) 返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数   ROUND(x) 返回一个对x的值进行四舍五入后，最接近于X的整数   ROUND(x,y) 返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位   TRUNCATE(x,y) 返回数字x截断为y位小数的结果   SQRT(x) 返回x的平方根。当X的值为负数时，返回NULL    举例：","keywords":["MySQL"],"articleBody":"第07章_单行函数 1. 函数的理解 1.1 什么是函数 函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既提高了代码效率，又提高了可维护性。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地提高用户对数据库的管理效率。\n从函数定义的角度出发，我们可以将函数分成内置函数和自定义函数。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。\n1.2 不同DBMS函数的差异 我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。\n1.3 MySQL的内置函数及分类 MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。\nMySQL提供的内置函数从实现的功能角度可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：单行函数、聚合函数（或分组函数）。\n两种SQL函数\n单行函数\n 操作数据对象 接受参数返回一个结果 只对一行进行变换 每行返回一个结果 可以嵌套 参数可以是一列或一个值  2. 数值函数 2.1 基本函数    函数 用法     ABS(x) 返回x的绝对值   SIGN(X) 返回X的符号。正数返回1，负数返回-1，0返回0   PI() 返回圆周率的值   CEIL(x)，CEILING(x) 返回大于或等于某个值的最小整数   FLOOR(x) 返回小于或等于某个值的最大整数   LEAST(e1,e2,e3…) 返回列表中的最小值   GREATEST(e1,e2,e3…) 返回列表中的最大值   MOD(x,y) 返回X除以Y后的余数   RAND() 返回0~1的随机值   RAND(x) 返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数   ROUND(x) 返回一个对x的值进行四舍五入后，最接近于X的整数   ROUND(x,y) 返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位   TRUNCATE(x,y) 返回数字x截断为y位小数的结果   SQRT(x) 返回x的平方根。当X的值为负数时，返回NULL    举例：\nSELECT ABS(-123),ABS(32),SIGN(-23),SIGN(43),PI(),CEIL(32.32),CEILING(-43.23),FLOOR(32.32), FLOOR(-43.23),MOD(12,5) FROM DUAL; SELECT RAND(),RAND(),RAND(10),RAND(10),RAND(-1),RAND(-1) FROM DUAL; SELECT ROUND(12.33),ROUND(12.343,2),ROUND(12.324,-1),TRUNCATE(12.66,1),TRUNCATE(12.66,-1) FROM DUAL; 2.2 角度与弧度互换函数    函数 用法     RADIANS(x) 将角度转化为弧度，其中，参数x为角度值   DEGREES(x) 将弧度转化为角度，其中，参数x为弧度值    SELECT RADIANS(30),RADIANS(60),RADIANS(90),DEGREES(2*PI()),DEGREES(RADIANS(90)) FROM DUAL; 2.3 三角函数    函数 用法     SIN(x) 返回x的正弦值，其中，参数x为弧度值   ASIN(x) 返回x的反正弦值，即获取正弦为x的值。如果x的值不在-1到1之间，则返回NULL   COS(x) 返回x的余弦值，其中，参数x为弧度值   ACOS(x) 返回x的反余弦值，即获取余弦为x的值。如果x的值不在-1到1之间，则返回NULL   TAN(x) 返回x的正切值，其中，参数x为弧度值   ATAN(x) 返回x的反正切值，即返回正切值为x的值   ATAN2(m,n) 返回两个参数的反正切值   COT(x) 返回x的余切值，其中，X为弧度值    举例：\nATAN2(M,N)函数返回两个参数的反正切值。 与ATAN(X)函数相比，ATAN2(M,N)需要两个参数，例如有两个点point(x1,y1)和point(x2,y2)，使用ATAN(X)函数计算反正切值为ATAN((y2-y1)/(x2-x1))，使用ATAN2(M,N)计算反正切值则为ATAN2(y2-y1,x2-x1)。由使用方式可以看出，当x2-x1等于0时，ATAN(X)函数会报错，而ATAN2(M,N)函数则仍然可以计算。\nATAN2(M,N)函数的使用示例如下：\nSELECT SIN(RADIANS(30)),DEGREES(ASIN(1)),TAN(RADIANS(45)),DEGREES(ATAN(1)),DEGREES(ATAN2(1,1)) FROM DUAL; 2.4 指数与对数    函数 用法     POW(x,y)，POWER(X,Y) 返回x的y次方   EXP(X) 返回e的X次方，其中e是一个常数，2.718281828459045   LN(X)，LOG(X) 返回以e为底的X的对数，当X   LOG10(X) 返回以10为底的X的对数，当X   LOG2(X) 返回以2为底的X的对数，当X    mysql SELECT POW(2,5),POWER(2,4),EXP(2),LN(10),LOG10(10),LOG2(4)  - FROM DUAL; +----------+------------+------------------+-------------------+-----------+---------+ | POW(2,5) | POWER(2,4) | EXP(2) | LN(10) | LOG10(10) | LOG2(4) | +----------+------------+------------------+-------------------+-----------+---------+ | 32 | 16 | 7.38905609893065 | 2.302585092994046 | 1 | 2 | +----------+------------+------------------+-------------------+-----------+---------+ 1 row in set (0.00 sec) 2.5 进制间的转换    函数 用法     BIN(x) 返回x的二进制编码   HEX(x) 返回x的十六进制编码   OCT(x) 返回x的八进制编码   CONV(x,f1,f2) 返回f1进制数变成f2进制数    mysql SELECT BIN(10),HEX(10),OCT(10),CONV(10,2,8)  - FROM DUAL; +---------+---------+---------+--------------+ | BIN(10) | HEX(10) | OCT(10) | CONV(10,2,8) | +---------+---------+---------+--------------+ | 1010 | A | 12 | 2 | +---------+---------+---------+--------------+ 1 row in set (0.00 sec) 3. 字符串函数    函数 用法     ASCII(S) 返回字符串S中的第一个字符的ASCII码值   CHAR_LENGTH(s) 返回字符串s的字符数。作用与CHARACTER_LENGTH(s)相同   LENGTH(s) 返回字符串s的字节数，和字符集有关   CONCAT(s1,s2,……,sn) 连接s1,s2,……,sn为一个字符串   CONCAT_WS(x, s1,s2,……,sn) 同CONCAT(s1,s2,…)函数，但是每个字符串之间要加上x   INSERT(str, idx, len, replacestr) 将字符串str从第idx位置开始，len个字符长的子串替换为字符串replacestr   REPLACE(str, a, b) 用字符串b替换字符串str中所有出现的字符串a   UPPER(s) 或 UCASE(s) 将字符串s的所有字母转成大写字母   LOWER(s) 或LCASE(s) 将字符串s的所有字母转成小写字母   LEFT(str,n) 返回字符串str最左边的n个字符   RIGHT(str,n) 返回字符串str最右边的n个字符   LPAD(str, len, pad) 用字符串pad对str最左边进行填充，直到str的长度为len个字符   RPAD(str ,len, pad) 用字符串pad对str最右边进行填充，直到str的长度为len个字符   LTRIM(s) 去掉字符串s左侧的空格   RTRIM(s) 去掉字符串s右侧的空格   TRIM(s) 去掉字符串s开始与结尾的空格   TRIM(s1 FROM s) 去掉字符串s开始与结尾的s1   TRIM(LEADING s1 FROM s) 去掉字符串s开始处的s1   TRIM(TRAILING s1 FROM s) 去掉字符串s结尾处的s1   REPEAT(str, n) 返回str重复n次的结果   SPACE(n) 返回n个空格   STRCMP(s1,s2) 比较字符串s1,s2的ASCII码值的大小   SUBSTR(s,index,len) 返回从字符串s的index位置其len个字符，作用与SUBSTRING(s,n,len)、MID(s,n,len)相同   LOCATE(substr,str) 返回字符串substr在字符串str中首次出现的位置，作用于POSITION(substr IN str)、INSTR(str,substr)相同。未找到，返回0   ELT(m,s1,s2,…,sn) 返回指定位置的字符串，如果m=1，则返回s1，如果m=2，则返回s2，如果m=n，则返回sn   FIELD(s,s1,s2,…,sn) 返回字符串s在字符串列表中第一次出现的位置   FIND_IN_SET(s1,s2) 返回字符串s1在字符串s2中出现的位置。其中，字符串s2是一个以逗号分隔的字符串   REVERSE(s) 返回s反转后的字符串   NULLIF(value1,value2) 比较两个字符串，如果value1与value2相等，则返回NULL，否则返回value1     注意：MySQL中，字符串的位置是从1开始的。\n 举例：\nmysql SELECT FIELD('mm','hello','msm','amma'),FIND_IN_SET('mm','hello,mm,amma')  - FROM DUAL; +----------------------------------+-----------------------------------+ | FIELD('mm','hello','msm','amma') | FIND_IN_SET('mm','hello,mm,amma') | +----------------------------------+-----------------------------------+ | 0 | 2 | +----------------------------------+-----------------------------------+ 1 row in set (0.00 sec) mysql SELECT NULLIF('mysql','mysql'),NULLIF('mysql', ''); +-------------------------+---------------------+ | NULLIF('mysql','mysql') | NULLIF('mysql', '') | +-------------------------+---------------------+ | NULL | mysql | +-------------------------+---------------------+ 1 row in set (0.00 sec) 4. 日期和时间函数 4.1 获取日期、时间    函数 用法     CURDATE() ，CURRENT_DATE() 返回当前日期，只包含年、月、日   CURTIME() ， CURRENT_TIME() 返回当前时间，只包含时、分、秒   NOW() / SYSDATE() / CURRENT_TIMESTAMP() / LOCALTIME() / LOCALTIMESTAMP() 返回当前系统日期和时间   UTC_DATE() 返回UTC（世界标准时间）日期   UTC_TIME() 返回UTC（世界标准时间）时间    举例：\nSELECT CURDATE(),CURTIME(),NOW(),SYSDATE()+0,UTC_DATE(),UTC_DATE()+0,UTC_TIME(),UTC_TIME()+0 FROM DUAL; 4.2 日期与时间戳的转换    函数 用法     UNIX_TIMESTAMP() 以UNIX时间戳的形式返回当前时间。SELECT UNIX_TIMESTAMP() -1634348884   UNIX_TIMESTAMP(date) 将时间date以UNIX时间戳的形式返回。   FROM_UNIXTIME(timestamp) 将UNIX时间戳的时间转换为普通格式的时间    举例：\nmysql SELECT UNIX_TIMESTAMP(now()); +-----------------------+ | UNIX_TIMESTAMP(now()) | +-----------------------+ | 1576380910 | +-----------------------+ 1 row in set (0.01 sec)  mysql SELECT UNIX_TIMESTAMP(CURDATE()); +---------------------------+ | UNIX_TIMESTAMP(CURDATE()) | +---------------------------+ | 1576339200 | +---------------------------+ 1 row in set (0.00 sec)  mysql SELECT UNIX_TIMESTAMP(CURTIME()); +---------------------------+ | UNIX_TIMESTAMP(CURTIME()) | +---------------------------+ | 1576380969 | +---------------------------+ 1 row in set (0.00 sec)  mysql SELECT UNIX_TIMESTAMP('2011-11-11 11:11:11') +---------------------------------------+ | UNIX_TIMESTAMP('2011-11-11 11:11:11') | +---------------------------------------+ | 1320981071 | +---------------------------------------+ 1 row in set (0.00 sec) mysql SELECT FROM_UNIXTIME(1576380910); +---------------------------+ | FROM_UNIXTIME(1576380910) | +---------------------------+ | 2019-12-15 11:35:10 | +---------------------------+ 1 row in set (0.00 sec) 4.3 获取月份、星期、星期数、天数等函数    函数 用法     YEAR(date) / MONTH(date) / DAY(date) 返回具体的日期值   HOUR(time) / MINUTE(time) / SECOND(time) 返回具体的时间值   MONTHNAME(date) 返回月份：January，…   DAYNAME(date) 返回星期几：MONDAY，TUESDAY…..SUNDAY   WEEKDAY(date) 返回周几，注意，周1是0，周2是1，。。。周日是6   QUARTER(date) 返回日期对应的季度，范围为1～4   WEEK(date) ， WEEKOFYEAR(date) 返回一年中的第几周   DAYOFYEAR(date) 返回日期是一年中的第几天   DAYOFMONTH(date) 返回日期位于所在月份的第几天   DAYOFWEEK(date) 返回周几，注意：周日是1，周一是2，。。。周六是7    举例：\nSELECT YEAR(CURDATE()),MONTH(CURDATE()),DAY(CURDATE()), HOUR(CURTIME()),MINUTE(NOW()),SECOND(SYSDATE()) FROM DUAL; SELECT MONTHNAME('2021-10-26'),DAYNAME('2021-10-26'),WEEKDAY('2021-10-26'), QUARTER(CURDATE()),WEEK(CURDATE()),DAYOFYEAR(NOW()), DAYOFMONTH(NOW()),DAYOFWEEK(NOW()) FROM DUAL; 4.4 日期的操作函数    函数 用法     EXTRACT(type FROM date) 返回指定日期中特定的部分，type指定返回的值    EXTRACT(type FROM date)函数中type的取值与含义：\nSELECT EXTRACT(MINUTE FROM NOW()),EXTRACT( WEEK FROM NOW()), EXTRACT( QUARTER FROM NOW()),EXTRACT( MINUTE_SECOND FROM NOW()) FROM DUAL; 4.5 时间和秒钟转换的函数    函数 用法     TIME_TO_SEC(time) 将 time 转化为秒并返回结果值。转化的公式为：小时*3600+分钟*60+秒   SEC_TO_TIME(seconds) 将 seconds 描述转化为包含小时、分钟和秒的时间    举例：\nmysql SELECT TIME_TO_SEC(NOW()); +--------------------+ | TIME_TO_SEC(NOW()) | +--------------------+ | 78774 | +--------------------+ 1 row in set (0.00 sec) mysql SELECT SEC_TO_TIME(78774); +--------------------+ | SEC_TO_TIME(78774) | +--------------------+ | 21:52:54 | +--------------------+ 1 row in set (0.12 sec) 4.6 计算日期和时间的函数 第1组：\n   函数 用法     DATE_ADD(datetime, INTERVAL expr type)，ADDDATE(date,INTERVAL expr type) 返回与给定日期时间相差INTERVAL时间段的日期时间   DATE_SUB(date,INTERVAL expr type)，SUBDATE(date,INTERVAL expr type) 返回与date相差INTERVAL时间间隔的日期    上述函数中type的取值：\n举例：\nSELECT DATE_ADD(NOW(), INTERVAL 1 DAY) AS col1,DATE_ADD('2021-10-21 23:32:12',INTERVAL 1 SECOND) AS col2, ADDDATE('2021-10-21 23:32:12',INTERVAL 1 SECOND) AS col3, DATE_ADD('2021-10-21 23:32:12',INTERVAL '1_1' MINUTE_SECOND) AS col4, DATE_ADD(NOW(), INTERVAL -1 YEAR) AS col5, #可以是负数 DATE_ADD(NOW(), INTERVAL '1_1' YEAR_MONTH) AS col6 #需要单引号 FROM DUAL; SELECT DATE_SUB('2021-01-21',INTERVAL 31 DAY) AS col1, SUBDATE('2021-01-21',INTERVAL 31 DAY) AS col2, DATE_SUB('2021-01-21 02:01:01',INTERVAL '1 1' DAY_HOUR) AS col3 FROM DUAL; 第2组：\n   函数 用法     ADDTIME(time1,time2) 返回time1加上time2的时间。当time2为一个数字时，代表的是秒，可以为负数   SUBTIME(time1,time2) 返回time1减去time2后的时间。当time2为一个数字时，代表的是秒，可以为负数   DATEDIFF(date1,date2) 返回date1 - date2的日期间隔天数   TIMEDIFF(time1, time2) 返回time1 - time2的时间间隔   FROM_DAYS(N) 返回从0000年1月1日起，N天以后的日期   TO_DAYS(date) 返回日期date距离0000年1月1日的天数   LAST_DAY(date) 返回date所在月份的最后一天的日期   MAKEDATE(year,n) 针对给定年份与所在年份中的天数返回一个日期   MAKETIME(hour,minute,second) 将给定的小时、分钟和秒组合成时间并返回   PERIOD_ADD(time,n) 返回time加上n后的时间    举例：\nSELECT ADDTIME(NOW(),20),SUBTIME(NOW(),30),SUBTIME(NOW(),'1:1:3'),DATEDIFF(NOW(),'2021-10-01'), TIMEDIFF(NOW(),'2021-10-25 22:10:10'),FROM_DAYS(366),TO_DAYS('0000-12-25'), LAST_DAY(NOW()),MAKEDATE(YEAR(NOW()),12),MAKETIME(10,21,23),PERIOD_ADD(20200101010101,10) FROM DUAL; mysql SELECT ADDTIME(NOW(), 50); +---------------------+ | ADDTIME(NOW(), 50) | +---------------------+ | 2019-12-15 22:17:47 | +---------------------+ 1 row in set (0.00 sec)  mysql SELECT ADDTIME(NOW(), '1:1:1'); +-------------------------+ | ADDTIME(NOW(), '1:1:1') | +-------------------------+ | 2019-12-15 23:18:46 | +-------------------------+ 1 row in set (0.00 sec) mysql SELECT SUBTIME(NOW(), '1:1:1'); +-------------------------+ | SUBTIME(NOW(), '1:1:1') | +-------------------------+ | 2019-12-15 21:23:50 | +-------------------------+ 1 row in set (0.00 sec)  mysql SELECT SUBTIME(NOW(), '-1:-1:-1'); +----------------------------+ | SUBTIME(NOW(), '-1:-1:-1') | +----------------------------+ | 2019-12-15 22:25:11 | +----------------------------+ 1 row in set, 1 warning (0.00 sec) mysql SELECT FROM_DAYS(366); +----------------+ | FROM_DAYS(366) | +----------------+ | 0001-01-01 | +----------------+ 1 row in set (0.00 sec) mysql SELECT MAKEDATE(2020,1); +------------------+ | MAKEDATE(2020,1) | +------------------+ | 2020-01-01 | +------------------+ 1 row in set (0.00 sec)  mysql SELECT MAKEDATE(2020,32); +-------------------+ | MAKEDATE(2020,32) | +-------------------+ | 2020-02-01 | +-------------------+ 1 row in set (0.00 sec) mysql SELECT MAKETIME(1,1,1); +-----------------+ | MAKETIME(1,1,1) | +-----------------+ | 01:01:01 | +-----------------+ 1 row in set (0.00 sec) mysql SELECT PERIOD_ADD(20200101010101,1); +------------------------------+ | PERIOD_ADD(20200101010101,1) | +------------------------------+ | 20200101010102 | +------------------------------+ 1 row in set (0.00 sec) mysql SELECT TO_DAYS(NOW()); +----------------+ | TO_DAYS(NOW()) | +----------------+ | 737773 | +----------------+ 1 row in set (0.00 sec) 举例：查询 7 天内的新增用户数有多少？\nSELECT COUNT(*) as num FROM new_user WHERE TO_DAYS(NOW())-TO_DAYS(regist_time)7 4.7 日期的格式化与解析    函数 用法     DATE_FORMAT(date,fmt) 按照字符串fmt格式化日期date值   TIME_FORMAT(time,fmt) 按照字符串fmt格式化时间time值   GET_FORMAT(date_type,format_type) 返回日期字符串的显示格式   STR_TO_DATE(str, fmt) 按照字符串fmt对str进行解析，解析为一个日期    上述非GET_FORMAT函数中fmt参数常用的格式符：\n   格式符 说明 格式符 说明     %Y 4位数字表示年份 %y 表示两位数字表示年份   %M 月名表示月份（January,….） %m 两位数字表示月份（01,02,03。。。）   %b 缩写的月名（Jan.，Feb.，….） %c 数字表示月份（1,2,3,…）   %D 英文后缀表示月中的天数（1st,2nd,3rd,…） %d 两位数字表示月中的天数(01,02…)   %e 数字形式表示月中的天数（1,2,3,4,5…..）     %H 两位数字表示小数，24小时制（01,02..） %h和%I 两位数字表示小时，12小时制（01,02..）   %k 数字形式的小时，24小时制(1,2,3) %l 数字形式表示小时，12小时制（1,2,3,4….）   %i 两位数字表示分钟（00,01,02） %S和%s 两位数字表示秒(00,01,02…)   %W 一周中的星期名称（Sunday…） %a 一周中的星期缩写（Sun.，Mon.,Tues.，..）   %w 以数字表示周中的天数(0=Sunday,1=Monday….)     %j 以3位数字表示年中的天数(001,002…) %U 以数字表示年中的第几周，（1,2,3。。）其中Sunday为周中第一天   %u 以数字表示年中的第几周，（1,2,3。。）其中Monday为周中第一天     %T 24小时制 %r 12小时制   %p AM或PM %% 表示%    GET_FORMAT函数中date_type和format_type参数取值如下：\n举例：\nmysql SELECT DATE_FORMAT(NOW(), '%H:%i:%s'); +--------------------------------+ | DATE_FORMAT(NOW(), '%H:%i:%s') | +--------------------------------+ | 22:57:34 | +--------------------------------+ 1 row in set (0.00 sec) SELECT STR_TO_DATE('09/01/2009','%m/%d/%Y') FROM DUAL;  SELECT STR_TO_DATE('20140422154706','%Y%m%d%H%i%s') FROM DUAL;  SELECT STR_TO_DATE('2014-04-22 15:47:06','%Y-%m-%d %H:%i:%s') FROM DUAL; mysql SELECT GET_FORMAT(DATE, 'USA'); +-------------------------+ | GET_FORMAT(DATE, 'USA') | +-------------------------+ | %m.%d.%Y | +-------------------------+ 1 row in set (0.00 sec)  SELECT DATE_FORMAT(NOW(),GET_FORMAT(DATE,'USA')), FROM DUAL; mysql SELECT STR_TO_DATE('2020-01-01 00:00:00','%Y-%m-%d'); +-----------------------------------------------+ | STR_TO_DATE('2020-01-01 00:00:00','%Y-%m-%d') | +-----------------------------------------------+ | 2020-01-01 | +-----------------------------------------------+ 1 row in set, 1 warning (0.00 sec) 5. 流程控制函数 流程处理函数可以根据不同的条件，执行不同的处理流程，可以在SQL语句中实现不同的条件选择。MySQL中的流程处理函数主要包括IF()、IFNULL()和CASE()函数。\n   函数 用法     IF(value,value1,value2) 如果value的值为TRUE，返回value1，否则返回value2   IFNULL(value1, value2) 如果value1不为NULL，返回value1，否则返回value2   CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 …. [ELSE resultn] END 相当于Java的if…else if…else…   CASE expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 …. [ELSE 值n] END 相当于Java的switch…case…    SELECT IF(1  0,'正确','错误') -正确 SELECT IFNULL(null,'Hello Word') -Hello Word SELECT CASE 　WHEN 1  0 　THEN '1  0' 　WHEN 2  0 　THEN '2  0' 　ELSE '3  0' 　END -1  0 SELECT CASE 1 　WHEN 1 THEN '我是1' 　WHEN 2 THEN '我是2' ELSE '你是谁' SELECT employee_id,salary, CASE WHEN salary=15000 THEN '高薪' \tWHEN salary=10000 THEN '潜力股' \tWHEN salary=8000 THEN '屌丝' \tELSE '草根' END \"描述\" FROM employees; SELECT oid,`status`, CASE `status` WHEN 1 THEN '未付款' \tWHEN 2 THEN '已付款' \tWHEN 3 THEN '已发货' \tWHEN 4 THEN '确认收货' \tELSE '无效订单' END FROM t_order; mysql SELECT CASE WHEN 1  0 THEN 'yes' WHEN 1  0 THEN 'no' ELSE 'unknown' END; +---------------------------------------------------------------------+ | CASE WHEN 1  0 THEN 'yes' WHEN 1  0 THEN 'no' ELSE 'unknown' END | +---------------------------------------------------------------------+ | yes | +---------------------------------------------------------------------+ 1 row in set (0.00 sec)  mysql SELECT CASE WHEN 1  0 THEN 'yes' WHEN 1 = 0 THEN 'no' ELSE 'unknown' END; +--------------------------------------------------------------------+ | CASE WHEN 1  0 THEN 'yes' WHEN 1 = 0 THEN 'no' ELSE 'unknown' END | +--------------------------------------------------------------------+ | unknown | +--------------------------------------------------------------------+ 1 row in set (0.00 sec) mysql SELECT CASE 1 WHEN 0 THEN 0 WHEN 1 THEN 1 ELSE -1 END; +------------------------------------------------+ | CASE 1 WHEN 0 THEN 0 WHEN 1 THEN 1 ELSE -1 END | +------------------------------------------------+ | 1 | +------------------------------------------------+ 1 row in set (0.00 sec)  mysql SELECT CASE -1 WHEN 0 THEN 0 WHEN 1 THEN 1 ELSE -1 END; +-------------------------------------------------+ | CASE -1 WHEN 0 THEN 0 WHEN 1 THEN 1 ELSE -1 END | +-------------------------------------------------+ | -1 | +-------------------------------------------------+ 1 row in set (0.00 sec) SELECT employee_id,12 * salary * (1 + IFNULL(commission_pct,0)) FROM employees; SELECT last_name, job_id, salary,  CASE job_id WHEN 'IT_PROG' THEN 1.10*salary  WHEN 'ST_CLERK' THEN 1.15*salary  WHEN 'SA_REP' THEN 1.20*salary  ELSE salary END \"REVISED_SALARY\" FROM employees; 练习：查询部门号为 10,20, 30 的员工信息, 若部门号为 10, 则打印其工资的 1.1 倍, 20 号部门, 则打印其工资的 1.2 倍, 30 号部门打印其工资的 1.3 倍数。\n6. 加密与解密函数 加密与解密函数主要用于对数据库中的数据进行加密和解密处理，以防止数据被他人窃取。这些函数在保证数据库安全时非常有用。\n   函数 用法     PASSWORD(str) 返回字符串str的加密版本，41位长的字符串。加密结果不可逆，常用于用户的密码加密   MD5(str) 返回字符串str的md5加密后的值，也是一种加密方式。若参数为NULL，则会返回NULL   SHA(str) 从原明文密码str计算并返回加密后的密码字符串，当参数为NULL时，返回NULL。SHA加密算法比MD5更加安全。   ENCODE(value,password_seed) 返回使用password_seed作为加密密码加密value   DECODE(value,password_seed) 返回使用password_seed作为加密密码解密value    可以看到，ENCODE(value,password_seed)函数与DECODE(value,password_seed)函数互为反函数。\n举例：\nmysql SELECT PASSWORD('mysql'), PASSWORD(NULL); +-------------------------------------------+----------------+ | PASSWORD('mysql') | PASSWORD(NULL) | +-------------------------------------------+----------------+ | *E74858DB86EBA20BC33D0AECAE8A8108C56B17FA | | +-------------------------------------------+----------------+ 1 row in set, 1 warning (0.00 sec) SELECT md5('123') -202cb962ac59075b964b07152d234b70 SELECT SHA('Tom123') -c7c506980abc31cc390a2438c90861d0f1216d50 mysql SELECT ENCODE('mysql', 'mysql'); +--------------------------+ | ENCODE('mysql', 'mysql') | +--------------------------+ | íg　¼　ìÉ | +--------------------------+ 1 row in set, 1 warning (0.01 sec) mysql SELECT DECODE(ENCODE('mysql','mysql'),'mysql'); +-----------------------------------------+ | DECODE(ENCODE('mysql','mysql'),'mysql') | +-----------------------------------------+ | mysql | +-----------------------------------------+ 1 row in set, 2 warnings (0.00 sec) 7. MySQL信息函数 MySQL中内置了一些可以查询MySQL信息的函数，这些函数主要用于帮助数据库开发或运维人员更好地对数据库进行维护工作。\n   函数 用法     VERSION() 返回当前MySQL的版本号   CONNECTION_ID() 返回当前MySQL服务器的连接数   DATABASE()，SCHEMA() 返回MySQL命令行当前所在的数据库   USER()，CURRENT_USER()、SYSTEM_USER()，SESSION_USER() 返回当前连接MySQL的用户名，返回结果格式为“主机名@用户名”   CHARSET(value) 返回字符串value自变量的字符集   COLLATION(value) 返回字符串value的比较规则    举例：\nmysql SELECT DATABASE(); +------------+ | DATABASE() | +------------+ | test | +------------+ 1 row in set (0.00 sec)  mysql SELECT DATABASE(); +------------+ | DATABASE() | +------------+ | test | +------------+ 1 row in set (0.00 sec) mysql SELECT USER(), CURRENT_USER(), SYSTEM_USER(),SESSION_USER(); +----------------+----------------+----------------+----------------+ | USER() | CURRENT_USER() | SYSTEM_USER() | SESSION_USER() | +----------------+----------------+----------------+----------------+ | root@localhost | root@localhost | root@localhost | root@localhost | +----------------+----------------+----------------+----------------+ mysql SELECT CHARSET('ABC'); +----------------+ | CHARSET('ABC') | +----------------+ | utf8mb4 | +----------------+ 1 row in set (0.00 sec) mysql SELECT COLLATION('ABC'); +--------------------+ | COLLATION('ABC') | +--------------------+ | utf8mb4_general_ci | +--------------------+ 1 row in set (0.00 sec) 8. 其他函数 MySQL中有些函数无法对其进行具体的分类，但是这些函数在MySQL的开发和运维过程中也是不容忽视的。\n   函数 用法     FORMAT(value,n) 返回对数字value进行格式化后的结果数据。n表示四舍五入后保留到小数点后n位   CONV(value,from,to) 将value的值进行不同进制之间的转换   INET_ATON(ipvalue) 将以点分隔的IP地址转化为一个数字   INET_NTOA(value) 将数字形式的IP地址转化为以点分隔的IP地址   BENCHMARK(n,expr) 将表达式expr重复执行n次。用于测试MySQL处理expr表达式所耗费的时间   CONVERT(value USING char_code) 将value所使用的字符编码修改为char_code    举例：\n# 如果n的值小于或者等于0，则只保留整数部分 mysql SELECT FORMAT(123.123, 2), FORMAT(123.523, 0), FORMAT(123.123, -2); +--------------------+--------------------+---------------------+ | FORMAT(123.123, 2) | FORMAT(123.523, 0) | FORMAT(123.123, -2) | +--------------------+--------------------+---------------------+ | 123.12 | 124 | 123 | +--------------------+--------------------+---------------------+ 1 row in set (0.00 sec) mysql SELECT CONV(16, 10, 2), CONV(8888,10,16), CONV(NULL, 10, 2); +-----------------+------------------+-------------------+ | CONV(16, 10, 2) | CONV(8888,10,16) | CONV(NULL, 10, 2) | +-----------------+------------------+-------------------+ | 10000 | 22B8 | NULL | +-----------------+------------------+-------------------+ 1 row in set (0.00 sec) mysql SELECT INET_ATON('192.168.1.100'); +----------------------------+ | INET_ATON('192.168.1.100') | +----------------------------+ | 3232235876 | +----------------------------+ 1 row in set (0.00 sec)  # 以“192.168.1.100”为例，计算方式为192乘以256的3次方，加上168乘以256的2次方，加上1乘以256，再加上100。 mysql SELECT INET_NTOA(3232235876); +-----------------------+ | INET_NTOA(3232235876) | +-----------------------+ | 192.168.1.100 | +-----------------------+ 1 row in set (0.00 sec) mysql SELECT BENCHMARK(1, MD5('mysql')); +----------------------------+ | BENCHMARK(1, MD5('mysql')) | +----------------------------+ | 0 | +----------------------------+ 1 row in set (0.00 sec)  mysql SELECT BENCHMARK(1000000, MD5('mysql')); +----------------------------------+ | BENCHMARK(1000000, MD5('mysql')) | +----------------------------------+ | 0 | +----------------------------------+ 1 row in set (0.20 sec) mysql SELECT CHARSET('mysql'), CHARSET(CONVERT('mysql' USING 'utf8')); +------------------+----------------------------------------+ | CHARSET('mysql') | CHARSET(CONVERT('mysql' USING 'utf8')) | +------------------+----------------------------------------+ | utf8mb4 | utf8 | +------------------+----------------------------------------+ 1 row in set, 1 warning (0.00 sec) ","wordCount":"1880","inLanguage":"en","datePublished":"2022-12-13T15:29:33+08:00","dateModified":"2022-12-13T15:29:33+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jiayi26.github.io/posts/%E7%AC%AC07%E7%AB%A0_%E5%8D%95%E8%A1%8C%E5%87%BD%E6%95%B0/"},"publisher":{"@type":"Organization","name":"JIAYI's Blog","logo":{"@type":"ImageObject","url":"https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jiayi26.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jiayi26.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://jiayi26.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jiayi26.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://jiayi26.github.io/posts/>Posts</a></div><h1 class=post-title>单行函数</h1><div class=post-meta><span title="2022-12-13 15:29:33 +0800 CST">December 13, 2022</span>&nbsp;·&nbsp;9 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/Pass-JIAYI%27s.github.io/post/posts/%e7%ac%ac07%e7%ab%a0_%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h1 id=第07章_单行函数>第07章_单行函数<a hidden class=anchor aria-hidden=true href=#第07章_单行函数>#</a></h1><h2 id=1-函数的理解>1. 函数的理解<a hidden class=anchor aria-hidden=true href=#1-函数的理解>#</a></h2><h3 id=11-什么是函数>1.1 什么是函数<a hidden class=anchor aria-hidden=true href=#11-什么是函数>#</a></h3><p>函数在计算机语言的使用中贯穿始终，函数的作用是什么呢？它可以把我们经常使用的代码封装起来，需要的时候直接调用即可。这样既<code>提高了代码效率</code>，又<code>提高了可维护性</code>。在 SQL 中我们也可以使用函数对检索出来的数据进行函数操作。使用这些函数，可以极大地<code>提高用户对数据库的管理效率</code>。</p><p><img loading=lazy src=../_resources/1554979529525.png alt=1554979529525></p><p>从函数定义的角度出发，我们可以将函数分成<code>内置函数</code>和<code>自定义函数</code>。在 SQL 语言中，同样也包括了内置函数和自定义函数。内置函数是系统内置的通用函数，而自定义函数是我们根据自己的需要编写的，本章及下一章讲解的是 SQL 的内置函数。</p><h3 id=12-不同dbms函数的差异>1.2 不同DBMS函数的差异<a hidden class=anchor aria-hidden=true href=#12-不同dbms函数的差异>#</a></h3><p>我们在使用 SQL 语言的时候，不是直接和这门语言打交道，而是通过它使用不同的数据库软件，即 DBMS。<strong>DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异。<strong>实际上，只有很少的函数是被 DBMS 同时支持的。比如，大多数 DBMS 使用（||）或者（+）来做拼接符，而在 MySQL 中的字符串拼接函数为concat()。大部分 DBMS 会有自己特定的函数，这就意味着</strong>采用 SQL 函数的代码可移植性是很差的</strong>，因此在使用函数的时候需要特别注意。</p><h3 id=13-mysql的内置函数及分类>1.3 MySQL的内置函数及分类<a hidden class=anchor aria-hidden=true href=#13-mysql的内置函数及分类>#</a></h3><p>MySQL提供了丰富的内置函数，这些函数使得数据的维护与管理更加方便，能够更好地提供数据的分析与统计功能，在一定程度上提高了开发人员进行数据分析与统计的效率。</p><p>MySQL提供的内置函数从<code>实现的功能角度</code>可以分为数值函数、字符串函数、日期和时间函数、流程控制函数、加密与解密函数、获取MySQL信息函数、聚合函数等。这里，我将这些丰富的内置函数再分为两类：<code>单行函数</code>、<code>聚合函数（或分组函数）</code>。</p><p><strong>两种SQL函数</strong></p><p><img loading=lazy src=../_resources/1555433204337.png alt=1555433204337></p><p><strong>单行函数</strong></p><ul><li>操作数据对象</li><li>接受参数返回一个结果</li><li><strong>只对一行进行变换</strong></li><li><strong>每行返回一个结果</strong></li><li>可以嵌套</li><li>参数可以是一列或一个值</li></ul><h2 id=2-数值函数>2. 数值函数<a hidden class=anchor aria-hidden=true href=#2-数值函数>#</a></h2><h3 id=21-基本函数>2.1 基本函数<a hidden class=anchor aria-hidden=true href=#21-基本函数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>ABS(x)</td><td>返回x的绝对值</td></tr><tr><td>SIGN(X)</td><td>返回X的符号。正数返回1，负数返回-1，0返回0</td></tr><tr><td>PI()</td><td>返回圆周率的值</td></tr><tr><td>CEIL(x)，CEILING(x)</td><td>返回大于或等于某个值的最小整数</td></tr><tr><td>FLOOR(x)</td><td>返回小于或等于某个值的最大整数</td></tr><tr><td>LEAST(e1,e2,e3…)</td><td>返回列表中的最小值</td></tr><tr><td>GREATEST(e1,e2,e3…)</td><td>返回列表中的最大值</td></tr><tr><td>MOD(x,y)</td><td>返回X除以Y后的余数</td></tr><tr><td>RAND()</td><td>返回0~1的随机值</td></tr><tr><td>RAND(x)</td><td>返回0~1的随机值，其中x的值用作种子值，相同的X值会产生相同的随机数</td></tr><tr><td>ROUND(x)</td><td>返回一个对x的值进行四舍五入后，最接近于X的整数</td></tr><tr><td>ROUND(x,y)</td><td>返回一个对x的值进行四舍五入后最接近X的值，并保留到小数点后面Y位</td></tr><tr><td>TRUNCATE(x,y)</td><td>返回数字x截断为y位小数的结果</td></tr><tr><td>SQRT(x)</td><td>返回x的平方根。当X的值为负数时，返回NULL</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>ABS</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>123</span>),<span style=color:#a6e22e>ABS</span>(<span style=color:#ae81ff>32</span>),<span style=color:#a6e22e>SIGN</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>23</span>),<span style=color:#a6e22e>SIGN</span>(<span style=color:#ae81ff>43</span>),<span style=color:#a6e22e>PI</span>(),<span style=color:#a6e22e>CEIL</span>(<span style=color:#ae81ff>32</span>.<span style=color:#ae81ff>32</span>),<span style=color:#a6e22e>CEILING</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>43</span>.<span style=color:#ae81ff>23</span>),<span style=color:#a6e22e>FLOOR</span>(<span style=color:#ae81ff>32</span>.<span style=color:#ae81ff>32</span>),
</span></span><span style=display:flex><span><span style=color:#a6e22e>FLOOR</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>43</span>.<span style=color:#ae81ff>23</span>),<span style=color:#66d9ef>MOD</span>(<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>5</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025162304844.png alt=image-20211025162304844></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>RAND</span>(),<span style=color:#a6e22e>RAND</span>(),<span style=color:#a6e22e>RAND</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>RAND</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>RAND</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>),<span style=color:#a6e22e>RAND</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025162538958.png alt=image-20211025162538958></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>ROUND</span>(<span style=color:#ae81ff>12</span>.<span style=color:#ae81ff>33</span>),<span style=color:#a6e22e>ROUND</span>(<span style=color:#ae81ff>12</span>.<span style=color:#ae81ff>343</span>,<span style=color:#ae81ff>2</span>),<span style=color:#a6e22e>ROUND</span>(<span style=color:#ae81ff>12</span>.<span style=color:#ae81ff>324</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>),<span style=color:#a6e22e>TRUNCATE</span>(<span style=color:#ae81ff>12</span>.<span style=color:#ae81ff>66</span>,<span style=color:#ae81ff>1</span>),<span style=color:#a6e22e>TRUNCATE</span>(<span style=color:#ae81ff>12</span>.<span style=color:#ae81ff>66</span>,<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025162730421.png alt=image-20211025162730421></p><h3 id=22-角度与弧度互换函数>2.2 角度与弧度互换函数<a hidden class=anchor aria-hidden=true href=#22-角度与弧度互换函数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>RADIANS(x)</td><td>将角度转化为弧度，其中，参数x为角度值</td></tr><tr><td>DEGREES(x)</td><td>将弧度转化为角度，其中，参数x为弧度值</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>RADIANS</span>(<span style=color:#ae81ff>30</span>),<span style=color:#a6e22e>RADIANS</span>(<span style=color:#ae81ff>60</span>),<span style=color:#a6e22e>RADIANS</span>(<span style=color:#ae81ff>90</span>),<span style=color:#a6e22e>DEGREES</span>(<span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>PI</span>()),<span style=color:#a6e22e>DEGREES</span>(<span style=color:#a6e22e>RADIANS</span>(<span style=color:#ae81ff>90</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><h3 id=23-三角函数>2.3 三角函数<a hidden class=anchor aria-hidden=true href=#23-三角函数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>SIN(x)</td><td>返回x的正弦值，其中，参数x为弧度值</td></tr><tr><td>ASIN(x)</td><td>返回x的反正弦值，即获取正弦为x的值。如果x的值不在-1到1之间，则返回NULL</td></tr><tr><td>COS(x)</td><td>返回x的余弦值，其中，参数x为弧度值</td></tr><tr><td>ACOS(x)</td><td>返回x的反余弦值，即获取余弦为x的值。如果x的值不在-1到1之间，则返回NULL</td></tr><tr><td>TAN(x)</td><td>返回x的正切值，其中，参数x为弧度值</td></tr><tr><td>ATAN(x)</td><td>返回x的反正切值，即返回正切值为x的值</td></tr><tr><td>ATAN2(m,n)</td><td>返回两个参数的反正切值</td></tr><tr><td>COT(x)</td><td>返回x的余切值，其中，X为弧度值</td></tr></tbody></table><p>举例：</p><p>ATAN2(M,N)函数返回两个参数的反正切值。
与ATAN(X)函数相比，ATAN2(M,N)需要两个参数，例如有两个点point(x1,y1)和point(x2,y2)，使用ATAN(X)函数计算反正切值为ATAN((y2-y1)/(x2-x1))，使用ATAN2(M,N)计算反正切值则为ATAN2(y2-y1,x2-x1)。由使用方式可以看出，当x2-x1等于0时，ATAN(X)函数会报错，而ATAN2(M,N)函数则仍然可以计算。</p><p>ATAN2(M,N)函数的使用示例如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>SIN</span>(<span style=color:#a6e22e>RADIANS</span>(<span style=color:#ae81ff>30</span>)),<span style=color:#a6e22e>DEGREES</span>(<span style=color:#a6e22e>ASIN</span>(<span style=color:#ae81ff>1</span>)),<span style=color:#a6e22e>TAN</span>(<span style=color:#a6e22e>RADIANS</span>(<span style=color:#ae81ff>45</span>)),<span style=color:#a6e22e>DEGREES</span>(<span style=color:#a6e22e>ATAN</span>(<span style=color:#ae81ff>1</span>)),<span style=color:#a6e22e>DEGREES</span>(<span style=color:#a6e22e>ATAN2</span>(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025163846974.png alt=image-20211025163846974></p><h3 id=24-指数与对数>2.4 指数与对数<a hidden class=anchor aria-hidden=true href=#24-指数与对数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>POW(x,y)，POWER(X,Y)</td><td>返回x的y次方</td></tr><tr><td>EXP(X)</td><td>返回e的X次方，其中e是一个常数，2.718281828459045</td></tr><tr><td>LN(X)，LOG(X)</td><td>返回以e为底的X的对数，当X &lt;= 0 时，返回的结果为NULL</td></tr><tr><td>LOG10(X)</td><td>返回以10为底的X的对数，当X &lt;= 0 时，返回的结果为NULL</td></tr><tr><td>LOG2(X)</td><td>返回以2为底的X的对数，当X &lt;= 0 时，返回NULL</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>POW</span>(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>5</span>),<span style=color:#a6e22e>POWER</span>(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>4</span>),<span style=color:#a6e22e>EXP</span>(<span style=color:#ae81ff>2</span>),<span style=color:#a6e22e>LN</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>LOG10</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>LOG2</span>(<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+----------+------------+------------------+-------------------+-----------+---------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>POW</span>(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>5</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>POWER</span>(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>4</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>EXP</span>(<span style=color:#ae81ff>2</span>)           <span style=color:#f92672>|</span> <span style=color:#a6e22e>LN</span>(<span style=color:#ae81ff>10</span>)            <span style=color:#f92672>|</span> <span style=color:#a6e22e>LOG10</span>(<span style=color:#ae81ff>10</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>LOG2</span>(<span style=color:#ae81ff>4</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------+------------+------------------+-------------------+-----------+---------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>       <span style=color:#ae81ff>32</span> <span style=color:#f92672>|</span>         <span style=color:#ae81ff>16</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>7</span>.<span style=color:#ae81ff>38905609893065</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>2</span>.<span style=color:#ae81ff>302585092994046</span> <span style=color:#f92672>|</span>         <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span>       <span style=color:#ae81ff>2</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------+------------+------------------+-------------------+-----------+---------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h3 id=25-进制间的转换>2.5 进制间的转换<a hidden class=anchor aria-hidden=true href=#25-进制间的转换>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>BIN(x)</td><td>返回x的二进制编码</td></tr><tr><td>HEX(x)</td><td>返回x的十六进制编码</td></tr><tr><td>OCT(x)</td><td>返回x的八进制编码</td></tr><tr><td>CONV(x,f1,f2)</td><td>返回f1进制数变成f2进制数</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>BIN</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>HEX</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>OCT</span>(<span style=color:#ae81ff>10</span>),<span style=color:#a6e22e>CONV</span>(<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>8</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+---------+---------+---------+--------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>BIN</span>(<span style=color:#ae81ff>10</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>HEX</span>(<span style=color:#ae81ff>10</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>OCT</span>(<span style=color:#ae81ff>10</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>CONV</span>(<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>8</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------+---------+---------+--------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>1010</span>    <span style=color:#f92672>|</span> A       <span style=color:#f92672>|</span> <span style=color:#ae81ff>12</span>      <span style=color:#f92672>|</span> <span style=color:#ae81ff>2</span>            <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------+---------+---------+--------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h2 id=3-字符串函数>3. 字符串函数<a hidden class=anchor aria-hidden=true href=#3-字符串函数>#</a></h2><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>ASCII(S)</td><td>返回字符串S中的第一个字符的ASCII码值</td></tr><tr><td>CHAR_LENGTH(s)</td><td>返回字符串s的字符数。作用与CHARACTER_LENGTH(s)相同</td></tr><tr><td>LENGTH(s)</td><td>返回字符串s的字节数，和字符集有关</td></tr><tr><td>CONCAT(s1,s2,&mldr;&mldr;,sn)</td><td>连接s1,s2,&mldr;&mldr;,sn为一个字符串</td></tr><tr><td>CONCAT_WS(x, s1,s2,&mldr;&mldr;,sn)</td><td>同CONCAT(s1,s2,&mldr;)函数，但是每个字符串之间要加上x</td></tr><tr><td>INSERT(str, idx, len, replacestr)</td><td>将字符串str从第idx位置开始，len个字符长的子串替换为字符串replacestr</td></tr><tr><td>REPLACE(str, a, b)</td><td>用字符串b替换字符串str中所有出现的字符串a</td></tr><tr><td>UPPER(s) 或 UCASE(s)</td><td>将字符串s的所有字母转成大写字母</td></tr><tr><td>LOWER(s) 或LCASE(s)</td><td>将字符串s的所有字母转成小写字母</td></tr><tr><td>LEFT(str,n)</td><td>返回字符串str最左边的n个字符</td></tr><tr><td>RIGHT(str,n)</td><td>返回字符串str最右边的n个字符</td></tr><tr><td>LPAD(str, len, pad)</td><td>用字符串pad对str最左边进行填充，直到str的长度为len个字符</td></tr><tr><td>RPAD(str ,len, pad)</td><td>用字符串pad对str最右边进行填充，直到str的长度为len个字符</td></tr><tr><td>LTRIM(s)</td><td>去掉字符串s左侧的空格</td></tr><tr><td>RTRIM(s)</td><td>去掉字符串s右侧的空格</td></tr><tr><td>TRIM(s)</td><td>去掉字符串s开始与结尾的空格</td></tr><tr><td>TRIM(s1 FROM s)</td><td>去掉字符串s开始与结尾的s1</td></tr><tr><td>TRIM(LEADING s1 FROM s)</td><td>去掉字符串s开始处的s1</td></tr><tr><td>TRIM(TRAILING s1 FROM s)</td><td>去掉字符串s结尾处的s1</td></tr><tr><td>REPEAT(str, n)</td><td>返回str重复n次的结果</td></tr><tr><td>SPACE(n)</td><td>返回n个空格</td></tr><tr><td>STRCMP(s1,s2)</td><td>比较字符串s1,s2的ASCII码值的大小</td></tr><tr><td>SUBSTR(s,index,len)</td><td>返回从字符串s的index位置其len个字符，作用与SUBSTRING(s,n,len)、MID(s,n,len)相同</td></tr><tr><td>LOCATE(substr,str)</td><td>返回字符串substr在字符串str中首次出现的位置，作用于POSITION(substr IN str)、INSTR(str,substr)相同。未找到，返回0</td></tr><tr><td>ELT(m,s1,s2,…,sn)</td><td>返回指定位置的字符串，如果m=1，则返回s1，如果m=2，则返回s2，如果m=n，则返回sn</td></tr><tr><td>FIELD(s,s1,s2,…,sn)</td><td>返回字符串s在字符串列表中第一次出现的位置</td></tr><tr><td>FIND_IN_SET(s1,s2)</td><td>返回字符串s1在字符串s2中出现的位置。其中，字符串s2是一个以逗号分隔的字符串</td></tr><tr><td>REVERSE(s)</td><td>返回s反转后的字符串</td></tr><tr><td>NULLIF(value1,value2)</td><td>比较两个字符串，如果value1与value2相等，则返回NULL，否则返回value1</td></tr></tbody></table><blockquote><p>注意：MySQL中，字符串的位置是从1开始的。</p></blockquote><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>FIELD</span>(<span style=color:#e6db74>&#39;mm&#39;</span>,<span style=color:#e6db74>&#39;hello&#39;</span>,<span style=color:#e6db74>&#39;msm&#39;</span>,<span style=color:#e6db74>&#39;amma&#39;</span>),<span style=color:#a6e22e>FIND_IN_SET</span>(<span style=color:#e6db74>&#39;mm&#39;</span>,<span style=color:#e6db74>&#39;hello,mm,amma&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------------+-----------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>FIELD</span>(<span style=color:#e6db74>&#39;mm&#39;</span>,<span style=color:#e6db74>&#39;hello&#39;</span>,<span style=color:#e6db74>&#39;msm&#39;</span>,<span style=color:#e6db74>&#39;amma&#39;</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>FIND_IN_SET</span>(<span style=color:#e6db74>&#39;mm&#39;</span>,<span style=color:#e6db74>&#39;hello,mm,amma&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------------+-----------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                                <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>                                 <span style=color:#ae81ff>2</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------------+-----------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>NULL</span><span style=color:#a6e22e>IF</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>,<span style=color:#e6db74>&#39;mysql&#39;</span>),<span style=color:#66d9ef>NULL</span><span style=color:#a6e22e>IF</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span><span style=color:#a6e22e>IF</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>,<span style=color:#e6db74>&#39;mysql&#39;</span>) <span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span><span style=color:#a6e22e>IF</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>, <span style=color:#e6db74>&#39;&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span>                    <span style=color:#f92672>|</span> mysql               <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h2 id=4-日期和时间函数>4. 日期和时间函数<a hidden class=anchor aria-hidden=true href=#4-日期和时间函数>#</a></h2><h3 id=41-获取日期时间>4.1 获取日期、时间<a hidden class=anchor aria-hidden=true href=#41-获取日期时间>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td><strong>CURDATE()</strong> ，CURRENT_DATE()</td><td>返回当前日期，只包含年、月、日</td></tr><tr><td><strong>CURTIME()</strong> ， CURRENT_TIME()</td><td>返回当前时间，只包含时、分、秒</td></tr><tr><td><strong>NOW()</strong> / SYSDATE() / CURRENT_TIMESTAMP() / LOCALTIME() / LOCALTIMESTAMP()</td><td>返回当前系统日期和时间</td></tr><tr><td>UTC_DATE()</td><td>返回UTC（世界标准时间）日期</td></tr><tr><td>UTC_TIME()</td><td>返回UTC（世界标准时间）时间</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>CURDATE</span>(),<span style=color:#a6e22e>CURTIME</span>(),<span style=color:#a6e22e>NOW</span>(),<span style=color:#a6e22e>SYSDATE</span>()<span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>,<span style=color:#66d9ef>UTC_DATE</span>(),<span style=color:#66d9ef>UTC_DATE</span>()<span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>,<span style=color:#66d9ef>UTC_TIME</span>(),<span style=color:#66d9ef>UTC_TIME</span>()<span style=color:#f92672>+</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025193742633.png alt=image-20211025193742633></p><h3 id=42-日期与时间戳的转换>4.2 日期与时间戳的转换<a hidden class=anchor aria-hidden=true href=#42-日期与时间戳的转换>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>UNIX_TIMESTAMP()</td><td>以UNIX时间戳的形式返回当前时间。SELECT UNIX_TIMESTAMP() ->1634348884</td></tr><tr><td>UNIX_TIMESTAMP(date)</td><td>将时间date以UNIX时间戳的形式返回。</td></tr><tr><td>FROM_UNIXTIME(timestamp)</td><td>将UNIX时间戳的时间转换为普通格式的时间</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#a6e22e>now</span>());
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#a6e22e>now</span>()) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>            <span style=color:#ae81ff>1576380910</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#a6e22e>CURDATE</span>());
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#a6e22e>CURDATE</span>()) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                <span style=color:#ae81ff>1576339200</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#a6e22e>CURTIME</span>());
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#a6e22e>CURTIME</span>()) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                <span style=color:#ae81ff>1576380969</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#e6db74>&#39;2011-11-11 11:11:11&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>UNIX_TIMESTAMP</span>(<span style=color:#e6db74>&#39;2011-11-11 11:11:11&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                            <span style=color:#ae81ff>1320981071</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>FROM_UNIXTIME</span>(<span style=color:#ae81ff>1576380910</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>FROM_UNIXTIME</span>(<span style=color:#ae81ff>1576380910</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>12</span><span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>11</span>:<span style=color:#ae81ff>35</span>:<span style=color:#ae81ff>10</span>       <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h3 id=43-获取月份星期星期数天数等函数>4.3 获取月份、星期、星期数、天数等函数<a hidden class=anchor aria-hidden=true href=#43-获取月份星期星期数天数等函数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>YEAR(date) / MONTH(date) / DAY(date)</td><td>返回具体的日期值</td></tr><tr><td>HOUR(time) / MINUTE(time) / SECOND(time)</td><td>返回具体的时间值</td></tr><tr><td>MONTHNAME(date)</td><td>返回月份：January，&mldr;</td></tr><tr><td>DAYNAME(date)</td><td>返回星期几：MONDAY，TUESDAY&mldr;..SUNDAY</td></tr><tr><td>WEEKDAY(date)</td><td>返回周几，注意，周1是0，周2是1，。。。周日是6</td></tr><tr><td>QUARTER(date)</td><td>返回日期对应的季度，范围为1～4</td></tr><tr><td>WEEK(date) ， WEEKOFYEAR(date)</td><td>返回一年中的第几周</td></tr><tr><td>DAYOFYEAR(date)</td><td>返回日期是一年中的第几天</td></tr><tr><td>DAYOFMONTH(date)</td><td>返回日期位于所在月份的第几天</td></tr><tr><td>DAYOFWEEK(date)</td><td>返回周几，注意：周日是1，周一是2，。。。周六是7</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>YEAR</span>(<span style=color:#a6e22e>CURDATE</span>()),<span style=color:#a6e22e>MONTH</span>(<span style=color:#a6e22e>CURDATE</span>()),<span style=color:#a6e22e>DAY</span>(<span style=color:#a6e22e>CURDATE</span>()),
</span></span><span style=display:flex><span><span style=color:#a6e22e>HOUR</span>(<span style=color:#a6e22e>CURTIME</span>()),<span style=color:#a6e22e>MINUTE</span>(<span style=color:#a6e22e>NOW</span>()),<span style=color:#a6e22e>SECOND</span>(<span style=color:#a6e22e>SYSDATE</span>())
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025213504115.png alt=image-20211025213504115></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MONTHNAME</span>(<span style=color:#e6db74>&#39;2021-10-26&#39;</span>),<span style=color:#a6e22e>DAYNAME</span>(<span style=color:#e6db74>&#39;2021-10-26&#39;</span>),<span style=color:#a6e22e>WEEKDAY</span>(<span style=color:#e6db74>&#39;2021-10-26&#39;</span>),
</span></span><span style=display:flex><span><span style=color:#a6e22e>QUARTER</span>(<span style=color:#a6e22e>CURDATE</span>()),<span style=color:#a6e22e>WEEK</span>(<span style=color:#a6e22e>CURDATE</span>()),<span style=color:#a6e22e>DAYOFYEAR</span>(<span style=color:#a6e22e>NOW</span>()),
</span></span><span style=display:flex><span><span style=color:#a6e22e>DAYOFMONTH</span>(<span style=color:#a6e22e>NOW</span>()),<span style=color:#a6e22e>DAYOFWEEK</span>(<span style=color:#a6e22e>NOW</span>())
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/image-20211025214818623.png alt=image-20211025214818623></p><h3 id=44-日期的操作函数>4.4 日期的操作函数<a hidden class=anchor aria-hidden=true href=#44-日期的操作函数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>EXTRACT(type FROM date)</td><td>返回指定日期中特定的部分，type指定返回的值</td></tr></tbody></table><p>EXTRACT(type FROM date)函数中type的取值与含义：</p><p><img loading=lazy src=../_resources/image-20211012142639469.png alt=image-20211012142639469></p><p><img loading=lazy src=../_resources/image-20211012142746444.png alt=image-20211012142746444></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>EXTRACT</span>(MINUTE <span style=color:#66d9ef>FROM</span> <span style=color:#a6e22e>NOW</span>()),<span style=color:#a6e22e>EXTRACT</span>( WEEK <span style=color:#66d9ef>FROM</span> <span style=color:#a6e22e>NOW</span>()),
</span></span><span style=display:flex><span><span style=color:#a6e22e>EXTRACT</span>( QUARTER <span style=color:#66d9ef>FROM</span> <span style=color:#a6e22e>NOW</span>()),<span style=color:#a6e22e>EXTRACT</span>( <span style=color:#66d9ef>MINUTE_SECOND</span> <span style=color:#66d9ef>FROM</span> <span style=color:#a6e22e>NOW</span>())
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><h3 id=45-时间和秒钟转换的函数>4.5 时间和秒钟转换的函数<a hidden class=anchor aria-hidden=true href=#45-时间和秒钟转换的函数>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>TIME_TO_SEC(time)</td><td>将 time 转化为秒并返回结果值。转化的公式为：<code>小时*3600+分钟*60+秒</code></td></tr><tr><td>SEC_TO_TIME(seconds)</td><td>将 seconds 描述转化为包含小时、分钟和秒的时间</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>TIME_TO_SEC</span>(<span style=color:#a6e22e>NOW</span>());
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>TIME_TO_SEC</span>(<span style=color:#a6e22e>NOW</span>()) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>               <span style=color:#ae81ff>78774</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>SEC_TO_TIME</span>(<span style=color:#ae81ff>78774</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>SEC_TO_TIME</span>(<span style=color:#ae81ff>78774</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>21</span>:<span style=color:#ae81ff>52</span>:<span style=color:#ae81ff>54</span>            <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>12</span> sec)
</span></span></code></pre></div><h3 id=46-计算日期和时间的函数>4.6 计算日期和时间的函数<a hidden class=anchor aria-hidden=true href=#46-计算日期和时间的函数>#</a></h3><p><strong>第1组：</strong></p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>DATE_ADD(datetime, INTERVAL expr type)，ADDDATE(date,INTERVAL expr type)</td><td>返回与给定日期时间相差INTERVAL时间段的日期时间</td></tr><tr><td>DATE_SUB(date,INTERVAL expr type)，SUBDATE(date,INTERVAL expr type)</td><td>返回与date相差INTERVAL时间间隔的日期</td></tr></tbody></table><p>上述函数中type的取值：</p><p><img loading=lazy src=../_resources/image-20211012143203355.png alt=image-20211012143203355></p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> DAY) <span style=color:#66d9ef>AS</span> col1,<span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#e6db74>&#39;2021-10-21 23:32:12&#39;</span>,<span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> SECOND) <span style=color:#66d9ef>AS</span> col2,
</span></span><span style=display:flex><span><span style=color:#a6e22e>ADDDATE</span>(<span style=color:#e6db74>&#39;2021-10-21 23:32:12&#39;</span>,<span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>1</span> SECOND) <span style=color:#66d9ef>AS</span> col3,
</span></span><span style=display:flex><span><span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#e6db74>&#39;2021-10-21 23:32:12&#39;</span>,<span style=color:#66d9ef>INTERVAL</span> <span style=color:#e6db74>&#39;1_1&#39;</span> <span style=color:#66d9ef>MINUTE_SECOND</span>) <span style=color:#66d9ef>AS</span> col4,
</span></span><span style=display:flex><span><span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>YEAR</span>) <span style=color:#66d9ef>AS</span> col5, <span style=color:#75715e>#可以是负数
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>DATE_ADD</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#66d9ef>INTERVAL</span> <span style=color:#e6db74>&#39;1_1&#39;</span> <span style=color:#66d9ef>YEAR_MONTH</span>) <span style=color:#66d9ef>AS</span> col6 <span style=color:#75715e>#需要单引号
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_SUB</span>(<span style=color:#e6db74>&#39;2021-01-21&#39;</span>,<span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>31</span> DAY) <span style=color:#66d9ef>AS</span> col1,
</span></span><span style=display:flex><span><span style=color:#a6e22e>SUBDATE</span>(<span style=color:#e6db74>&#39;2021-01-21&#39;</span>,<span style=color:#66d9ef>INTERVAL</span> <span style=color:#ae81ff>31</span> DAY) <span style=color:#66d9ef>AS</span> col2,
</span></span><span style=display:flex><span><span style=color:#a6e22e>DATE_SUB</span>(<span style=color:#e6db74>&#39;2021-01-21 02:01:01&#39;</span>,<span style=color:#66d9ef>INTERVAL</span> <span style=color:#e6db74>&#39;1 1&#39;</span> <span style=color:#66d9ef>DAY_HOUR</span>) <span style=color:#66d9ef>AS</span> col3
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><p><strong>第2组：</strong></p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>ADDTIME(time1,time2)</td><td>返回time1加上time2的时间。当time2为一个数字时，代表的是<code>秒</code>，可以为负数</td></tr><tr><td>SUBTIME(time1,time2)</td><td>返回time1减去time2后的时间。当time2为一个数字时，代表的是<code>秒</code>，可以为负数</td></tr><tr><td>DATEDIFF(date1,date2)</td><td>返回date1 - date2的日期间隔天数</td></tr><tr><td>TIMEDIFF(time1, time2)</td><td>返回time1 - time2的时间间隔</td></tr><tr><td>FROM_DAYS(N)</td><td>返回从0000年1月1日起，N天以后的日期</td></tr><tr><td>TO_DAYS(date)</td><td>返回日期date距离0000年1月1日的天数</td></tr><tr><td>LAST_DAY(date)</td><td>返回date所在月份的最后一天的日期</td></tr><tr><td>MAKEDATE(year,n)</td><td>针对给定年份与所在年份中的天数返回一个日期</td></tr><tr><td>MAKETIME(hour,minute,second)</td><td>将给定的小时、分钟和秒组合成时间并返回</td></tr><tr><td>PERIOD_ADD(time,n)</td><td>返回time加上n后的时间</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>ADDTIME</span>(<span style=color:#a6e22e>NOW</span>(),<span style=color:#ae81ff>20</span>),<span style=color:#a6e22e>SUBTIME</span>(<span style=color:#a6e22e>NOW</span>(),<span style=color:#ae81ff>30</span>),<span style=color:#a6e22e>SUBTIME</span>(<span style=color:#a6e22e>NOW</span>(),<span style=color:#e6db74>&#39;1:1:3&#39;</span>),<span style=color:#a6e22e>DATEDIFF</span>(<span style=color:#a6e22e>NOW</span>(),<span style=color:#e6db74>&#39;2021-10-01&#39;</span>),
</span></span><span style=display:flex><span><span style=color:#a6e22e>TIMEDIFF</span>(<span style=color:#a6e22e>NOW</span>(),<span style=color:#e6db74>&#39;2021-10-25 22:10:10&#39;</span>),<span style=color:#a6e22e>FROM_DAYS</span>(<span style=color:#ae81ff>366</span>),<span style=color:#a6e22e>TO_DAYS</span>(<span style=color:#e6db74>&#39;0000-12-25&#39;</span>),
</span></span><span style=display:flex><span><span style=color:#a6e22e>LAST_DAY</span>(<span style=color:#a6e22e>NOW</span>()),<span style=color:#a6e22e>MAKEDATE</span>(<span style=color:#66d9ef>YEAR</span>(<span style=color:#a6e22e>NOW</span>()),<span style=color:#ae81ff>12</span>),<span style=color:#a6e22e>MAKETIME</span>(<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>21</span>,<span style=color:#ae81ff>23</span>),<span style=color:#a6e22e>PERIOD_ADD</span>(<span style=color:#ae81ff>20200101010101</span>,<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>ADDTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#ae81ff>50</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>ADDTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#ae81ff>50</span>)  <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>12</span><span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>17</span>:<span style=color:#ae81ff>47</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>ADDTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;1:1:1&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>ADDTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;1:1:1&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>12</span><span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>23</span>:<span style=color:#ae81ff>18</span>:<span style=color:#ae81ff>46</span>     <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>SUBTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;1:1:1&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>SUBTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;1:1:1&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>12</span><span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>21</span>:<span style=color:#ae81ff>23</span>:<span style=color:#ae81ff>50</span>     <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>SUBTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;-1:-1:-1&#39;</span>); 
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>SUBTIME</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;-1:-1:-1&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>12</span><span style=color:#f92672>-</span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>25</span>:<span style=color:#ae81ff>11</span>        <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>warning</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>FROM_DAYS</span>(<span style=color:#ae81ff>366</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>FROM_DAYS</span>(<span style=color:#ae81ff>366</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>0001</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span>     <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MAKEDATE</span>(<span style=color:#ae81ff>2020</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>MAKEDATE</span>(<span style=color:#ae81ff>2020</span>,<span style=color:#ae81ff>1</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2020</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span>       <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MAKEDATE</span>(<span style=color:#ae81ff>2020</span>,<span style=color:#ae81ff>32</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>MAKEDATE</span>(<span style=color:#ae81ff>2020</span>,<span style=color:#ae81ff>32</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2020</span><span style=color:#f92672>-</span><span style=color:#ae81ff>02</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span>        <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>MAKETIME</span>(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>MAKETIME</span>(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>1</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>01</span>:<span style=color:#ae81ff>01</span>:<span style=color:#ae81ff>01</span>        <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>PERIOD_ADD</span>(<span style=color:#ae81ff>20200101010101</span>,<span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>PERIOD_ADD</span>(<span style=color:#ae81ff>20200101010101</span>,<span style=color:#ae81ff>1</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>               <span style=color:#ae81ff>20200101010102</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>TO_DAYS</span>(<span style=color:#a6e22e>NOW</span>());
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>TO_DAYS</span>(<span style=color:#a6e22e>NOW</span>()) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>          <span style=color:#ae81ff>737773</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><p>举例：查询 7 天内的新增用户数有多少？</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>as</span> num <span style=color:#66d9ef>FROM</span> new_user <span style=color:#66d9ef>WHERE</span> <span style=color:#a6e22e>TO_DAYS</span>(<span style=color:#a6e22e>NOW</span>())<span style=color:#f92672>-</span><span style=color:#a6e22e>TO_DAYS</span>(regist_time)<span style=color:#f92672>&lt;=</span><span style=color:#ae81ff>7</span>
</span></span></code></pre></div><h3 id=47-日期的格式化与解析>4.7 日期的格式化与解析<a hidden class=anchor aria-hidden=true href=#47-日期的格式化与解析>#</a></h3><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>DATE_FORMAT(date,fmt)</td><td>按照字符串fmt格式化日期date值</td></tr><tr><td>TIME_FORMAT(time,fmt)</td><td>按照字符串fmt格式化时间time值</td></tr><tr><td>GET_FORMAT(date_type,format_type)</td><td>返回日期字符串的显示格式</td></tr><tr><td>STR_TO_DATE(str, fmt)</td><td>按照字符串fmt对str进行解析，解析为一个日期</td></tr></tbody></table><p>上述<code>非GET_FORMAT</code>函数中fmt参数常用的格式符：</p><table><thead><tr><th>格式符</th><th>说明</th><th>格式符</th><th>说明</th></tr></thead><tbody><tr><td>%Y</td><td>4位数字表示年份</td><td>%y</td><td>表示两位数字表示年份</td></tr><tr><td>%M</td><td>月名表示月份（January,&mldr;.）</td><td>%m</td><td>两位数字表示月份（01,02,03。。。）</td></tr><tr><td>%b</td><td>缩写的月名（Jan.，Feb.，&mldr;.）</td><td>%c</td><td>数字表示月份（1,2,3,&mldr;）</td></tr><tr><td>%D</td><td>英文后缀表示月中的天数（1st,2nd,3rd,&mldr;）</td><td>%d</td><td>两位数字表示月中的天数(01,02&mldr;)</td></tr><tr><td>%e</td><td>数字形式表示月中的天数（1,2,3,4,5&mldr;..）</td><td></td><td></td></tr><tr><td>%H</td><td>两位数字表示小数，24小时制（01,02..）</td><td>%h和%I</td><td>两位数字表示小时，12小时制（01,02..）</td></tr><tr><td>%k</td><td>数字形式的小时，24小时制(1,2,3)</td><td>%l</td><td>数字形式表示小时，12小时制（1,2,3,4&mldr;.）</td></tr><tr><td>%i</td><td>两位数字表示分钟（00,01,02）</td><td>%S和%s</td><td>两位数字表示秒(00,01,02&mldr;)</td></tr><tr><td>%W</td><td>一周中的星期名称（Sunday&mldr;）</td><td>%a</td><td>一周中的星期缩写（Sun.，Mon.,Tues.，..）</td></tr><tr><td>%w</td><td>以数字表示周中的天数(0=Sunday,1=Monday&mldr;.)</td><td></td><td></td></tr><tr><td>%j</td><td>以3位数字表示年中的天数(001,002&mldr;)</td><td>%U</td><td>以数字表示年中的第几周，（1,2,3。。）其中Sunday为周中第一天</td></tr><tr><td>%u</td><td>以数字表示年中的第几周，（1,2,3。。）其中Monday为周中第一天</td><td></td><td></td></tr><tr><td>%T</td><td>24小时制</td><td>%r</td><td>12小时制</td></tr><tr><td>%p</td><td>AM或PM</td><td>%%</td><td>表示%</td></tr></tbody></table><p>GET_FORMAT函数中date_type和format_type参数取值如下：</p><p><img loading=lazy src=../_resources/image-20211012145231321.png alt=image-20211012145231321></p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;%H:%i:%s&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>NOW</span>(), <span style=color:#e6db74>&#39;%H:%i:%s&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>57</span>:<span style=color:#ae81ff>34</span>                        <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>STR_TO_DATE</span>(<span style=color:#e6db74>&#39;09/01/2009&#39;</span>,<span style=color:#e6db74>&#39;%m/%d/%Y&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>STR_TO_DATE</span>(<span style=color:#e6db74>&#39;20140422154706&#39;</span>,<span style=color:#e6db74>&#39;%Y%m%d%H%i%s&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>STR_TO_DATE</span>(<span style=color:#e6db74>&#39;2014-04-22 15:47:06&#39;</span>,<span style=color:#e6db74>&#39;%Y-%m-%d %H:%i:%s&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>GET_FORMAT</span>(<span style=color:#66d9ef>DATE</span>, <span style=color:#e6db74>&#39;USA&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>GET_FORMAT</span>(<span style=color:#66d9ef>DATE</span>, <span style=color:#e6db74>&#39;USA&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#f92672>%</span>m.<span style=color:#f92672>%</span>d.<span style=color:#f92672>%</span>Y                <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DATE_FORMAT</span>(<span style=color:#a6e22e>NOW</span>(),<span style=color:#a6e22e>GET_FORMAT</span>(<span style=color:#66d9ef>DATE</span>,<span style=color:#e6db74>&#39;USA&#39;</span>)),
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#66d9ef>DUAL</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>STR_TO_DATE</span>(<span style=color:#e6db74>&#39;2020-01-01 00:00:00&#39;</span>,<span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>); 
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>STR_TO_DATE</span>(<span style=color:#e6db74>&#39;2020-01-01 00:00:00&#39;</span>,<span style=color:#e6db74>&#39;%Y-%m-%d&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2020</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span><span style=color:#f92672>-</span><span style=color:#ae81ff>01</span>                                    <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>warning</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h2 id=5-流程控制函数>5. 流程控制函数<a hidden class=anchor aria-hidden=true href=#5-流程控制函数>#</a></h2><p>流程处理函数可以根据不同的条件，执行不同的处理流程，可以在SQL语句中实现不同的条件选择。MySQL中的流程处理函数主要包括IF()、IFNULL()和CASE()函数。</p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>IF(value,value1,value2)</td><td>如果value的值为TRUE，返回value1，否则返回value2</td></tr><tr><td>IFNULL(value1, value2)</td><td>如果value1不为NULL，返回value1，否则返回value2</td></tr><tr><td>CASE WHEN 条件1 THEN 结果1 WHEN 条件2 THEN 结果2 &mldr;. [ELSE resultn] END</td><td>相当于Java的if&mldr;else if&mldr;else&mldr;</td></tr><tr><td>CASE expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 &mldr;. [ELSE 值n] END</td><td>相当于Java的switch&mldr;case&mldr;</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>IF</span>(<span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>,<span style=color:#e6db74>&#39;正确&#39;</span>,<span style=color:#e6db74>&#39;错误&#39;</span>)    
</span></span><span style=display:flex><span><span style=color:#f92672>-&gt;</span><span style=color:#960050;background-color:#1e0010>正确</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>IFNULL</span>(<span style=color:#66d9ef>null</span>,<span style=color:#e6db74>&#39;Hello Word&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>-&gt;</span>Hello Word
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CASE</span> 
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;1 &gt; 0&#39;</span>
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;2 &gt; 0&#39;</span>
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;3 &gt; 0&#39;</span>
</span></span><span style=display:flex><span>　　END
</span></span><span style=display:flex><span><span style=color:#f92672>-&gt;</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CASE</span> <span style=color:#ae81ff>1</span> 
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;我是1&#39;</span>
</span></span><span style=display:flex><span>　　<span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;我是2&#39;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;你是谁&#39;</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> employee_id,salary, <span style=color:#66d9ef>CASE</span> <span style=color:#66d9ef>WHEN</span> salary<span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>15000</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;高薪&#39;</span> 
</span></span><span style=display:flex><span>				  <span style=color:#66d9ef>WHEN</span> salary<span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>10000</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;潜力股&#39;</span>  
</span></span><span style=display:flex><span>				  <span style=color:#66d9ef>WHEN</span> salary<span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>8000</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;屌丝&#39;</span> 
</span></span><span style=display:flex><span>				  <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;草根&#39;</span> END  <span style=color:#e6db74>&#34;描述&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> employees; 
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> oid,<span style=color:#f92672>`</span>status<span style=color:#f92672>`</span>, <span style=color:#66d9ef>CASE</span> <span style=color:#f92672>`</span>status<span style=color:#f92672>`</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;未付款&#39;</span> 
</span></span><span style=display:flex><span>								   <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>2</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;已付款&#39;</span> 
</span></span><span style=display:flex><span>								   <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;已发货&#39;</span>  
</span></span><span style=display:flex><span>								   <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>4</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;确认收货&#39;</span>  
</span></span><span style=display:flex><span>								   <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;无效订单&#39;</span> END 
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> t_order;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CASE</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;yes&#39;</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;no&#39;</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;unknown&#39;</span> END;
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CASE</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;yes&#39;</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;no&#39;</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;unknown&#39;</span> END <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> yes                                                                  <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+---------------------------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CASE</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;yes&#39;</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;no&#39;</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;unknown&#39;</span> END;  
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CASE</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;yes&#39;</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;no&#39;</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;unknown&#39;</span> END <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> unknown                                                             <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CASE</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> END;
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CASE</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> END <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                                               <span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CASE</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> END;
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CASE</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>0</span> <span style=color:#66d9ef>WHEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>THEN</span> <span style=color:#ae81ff>1</span> <span style=color:#66d9ef>ELSE</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> END <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                                               <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> employee_id,<span style=color:#ae81ff>12</span> <span style=color:#f92672>*</span> salary <span style=color:#f92672>*</span> (<span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>IFNULL</span>(commission_pct,<span style=color:#ae81ff>0</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> employees;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> last_name, job_id, salary,
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>CASE</span> job_id <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;IT_PROG&#39;</span>  <span style=color:#66d9ef>THEN</span>  <span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>10</span><span style=color:#f92672>*</span>salary
</span></span><span style=display:flex><span>                   <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;ST_CLERK&#39;</span> <span style=color:#66d9ef>THEN</span>  <span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>15</span><span style=color:#f92672>*</span>salary
</span></span><span style=display:flex><span>                   <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;SA_REP&#39;</span>   <span style=color:#66d9ef>THEN</span>  <span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>20</span><span style=color:#f92672>*</span>salary
</span></span><span style=display:flex><span>       			   <span style=color:#66d9ef>ELSE</span>      salary END     <span style=color:#e6db74>&#34;REVISED_SALARY&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>   employees;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/1554980865631.png alt=1554980865631></p><p><strong>练习：查询部门号为 10,20, 30 的员工信息, 若部门号为 10, 则打印其工资的 1.1 倍, 20 号部门, 则打印其工资的 1.2 倍, 30 号部门打印其工资的 1.3 倍数。</strong></p><h2 id=6-加密与解密函数>6. 加密与解密函数<a hidden class=anchor aria-hidden=true href=#6-加密与解密函数>#</a></h2><p>加密与解密函数主要用于对数据库中的数据进行加密和解密处理，以防止数据被他人窃取。这些函数在保证数据库安全时非常有用。</p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>PASSWORD(str)</td><td>返回字符串str的加密版本，41位长的字符串。加密结果<code>不可逆</code>，常用于用户的密码加密</td></tr><tr><td>MD5(str)</td><td>返回字符串str的md5加密后的值，也是一种加密方式。若参数为NULL，则会返回NULL</td></tr><tr><td>SHA(str)</td><td>从原明文密码str计算并返回加密后的密码字符串，当参数为NULL时，返回NULL。<code>SHA加密算法比MD5更加安全</code>。</td></tr><tr><td>ENCODE(value,password_seed)</td><td>返回使用password_seed作为加密密码加密value</td></tr><tr><td>DECODE(value,password_seed)</td><td>返回使用password_seed作为加密密码解密value</td></tr></tbody></table><p>可以看到，ENCODE(value,password_seed)函数与DECODE(value,password_seed)函数互为反函数。</p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>PASSWORD</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>), <span style=color:#a6e22e>PASSWORD</span>(<span style=color:#66d9ef>NULL</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------------------------+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>PASSWORD</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>)                         <span style=color:#f92672>|</span> <span style=color:#a6e22e>PASSWORD</span>(<span style=color:#66d9ef>NULL</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------------------------+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#f92672>*</span>E74858DB86EBA20BC33D0AECAE8A8108C56B17FA <span style=color:#f92672>|</span>                <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-------------------------------------------+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>warning</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>md5</span>(<span style=color:#e6db74>&#39;123&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>-&gt;</span><span style=color:#ae81ff>202</span>cb962ac59075b964b07152d234b70
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>SHA</span>(<span style=color:#e6db74>&#39;Tom123&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>-&gt;</span>c7c506980abc31cc390a2438c90861d0f1216d50
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>ENCODE</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>, <span style=color:#e6db74>&#39;mysql&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>ENCODE</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>, <span style=color:#e6db74>&#39;mysql&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#960050;background-color:#1e0010>í</span>g　<span style=color:#960050;background-color:#1e0010>¼</span>　<span style=color:#960050;background-color:#1e0010>ìÉ</span>                  <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>warning</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>01</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>DECODE</span>(<span style=color:#a6e22e>ENCODE</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>,<span style=color:#e6db74>&#39;mysql&#39;</span>),<span style=color:#e6db74>&#39;mysql&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>DECODE</span>(<span style=color:#a6e22e>ENCODE</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>,<span style=color:#e6db74>&#39;mysql&#39;</span>),<span style=color:#e6db74>&#39;mysql&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> mysql                                   <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span>, <span style=color:#ae81ff>2</span> <span style=color:#a6e22e>warnings</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h2 id=7-mysql信息函数>7. MySQL信息函数<a hidden class=anchor aria-hidden=true href=#7-mysql信息函数>#</a></h2><p>MySQL中内置了一些可以查询MySQL信息的函数，这些函数主要用于帮助数据库开发或运维人员更好地对数据库进行维护工作。</p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>VERSION()</td><td>返回当前MySQL的版本号</td></tr><tr><td>CONNECTION_ID()</td><td>返回当前MySQL服务器的连接数</td></tr><tr><td>DATABASE()，SCHEMA()</td><td>返回MySQL命令行当前所在的数据库</td></tr><tr><td>USER()，CURRENT_USER()、SYSTEM_USER()，SESSION_USER()</td><td>返回当前连接MySQL的用户名，返回结果格式为“主机名@用户名”</td></tr><tr><td>CHARSET(value)</td><td>返回字符串value自变量的字符集</td></tr><tr><td>COLLATION(value)</td><td>返回字符串value的比较规则</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DATABASE</span>();
</span></span><span style=display:flex><span><span style=color:#f92672>+------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>DATABASE</span>() <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> test       <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>DATABASE</span>();
</span></span><span style=display:flex><span><span style=color:#f92672>+------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>DATABASE</span>() <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> test       <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>USER</span>(), <span style=color:#66d9ef>CURRENT_USER</span>(), <span style=color:#a6e22e>SYSTEM_USER</span>(),<span style=color:#a6e22e>SESSION_USER</span>();
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+----------------+----------------+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>USER</span>()         <span style=color:#f92672>|</span> <span style=color:#66d9ef>CURRENT_USER</span>() <span style=color:#f92672>|</span> <span style=color:#a6e22e>SYSTEM_USER</span>()  <span style=color:#f92672>|</span> <span style=color:#a6e22e>SESSION_USER</span>() <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+----------------+----------------+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> root<span style=color:#f92672>@</span>localhost <span style=color:#f92672>|</span> root<span style=color:#f92672>@</span>localhost <span style=color:#f92672>|</span> root<span style=color:#f92672>@</span>localhost <span style=color:#f92672>|</span> root<span style=color:#f92672>@</span>localhost <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+----------------+----------------+----------------+</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CHARSET</span>(<span style=color:#e6db74>&#39;ABC&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CHARSET</span>(<span style=color:#e6db74>&#39;ABC&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> utf8mb4        <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>COLLATION</span>(<span style=color:#e6db74>&#39;ABC&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>COLLATION</span>(<span style=color:#e6db74>&#39;ABC&#39;</span>)   <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> utf8mb4_general_ci <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><h2 id=8-其他函数>8. 其他函数<a hidden class=anchor aria-hidden=true href=#8-其他函数>#</a></h2><p>MySQL中有些函数无法对其进行具体的分类，但是这些函数在MySQL的开发和运维过程中也是不容忽视的。</p><table><thead><tr><th>函数</th><th>用法</th></tr></thead><tbody><tr><td>FORMAT(value,n)</td><td>返回对数字value进行格式化后的结果数据。n表示<code>四舍五入</code>后保留到小数点后n位</td></tr><tr><td>CONV(value,from,to)</td><td>将value的值进行不同进制之间的转换</td></tr><tr><td>INET_ATON(ipvalue)</td><td>将以点分隔的IP地址转化为一个数字</td></tr><tr><td>INET_NTOA(value)</td><td>将数字形式的IP地址转化为以点分隔的IP地址</td></tr><tr><td>BENCHMARK(n,expr)</td><td>将表达式expr重复执行n次。用于测试MySQL处理expr表达式所耗费的时间</td></tr><tr><td>CONVERT(value USING char_code)</td><td>将value所使用的字符编码修改为char_code</td></tr></tbody></table><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e># 如果n的值小于或者等于0，则只保留整数部分
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>FORMAT</span>(<span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>123</span>, <span style=color:#ae81ff>2</span>), <span style=color:#a6e22e>FORMAT</span>(<span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>523</span>, <span style=color:#ae81ff>0</span>), <span style=color:#a6e22e>FORMAT</span>(<span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>123</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>); 
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+--------------------+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>FORMAT</span>(<span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>123</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>FORMAT</span>(<span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>523</span>, <span style=color:#ae81ff>0</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>FORMAT</span>(<span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>123</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+--------------------+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>123</span>.<span style=color:#ae81ff>12</span>             <span style=color:#f92672>|</span> <span style=color:#ae81ff>124</span>                <span style=color:#f92672>|</span> <span style=color:#ae81ff>123</span>                 <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+--------------------+--------------------+---------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>CONV</span>(<span style=color:#ae81ff>16</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span>), <span style=color:#a6e22e>CONV</span>(<span style=color:#ae81ff>8888</span>,<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>16</span>), <span style=color:#a6e22e>CONV</span>(<span style=color:#66d9ef>NULL</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------+------------------+-------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>CONV</span>(<span style=color:#ae81ff>16</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>CONV</span>(<span style=color:#ae81ff>8888</span>,<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>16</span>) <span style=color:#f92672>|</span> <span style=color:#a6e22e>CONV</span>(<span style=color:#66d9ef>NULL</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>2</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------+------------------+-------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>10000</span>           <span style=color:#f92672>|</span> <span style=color:#ae81ff>22</span>B8             <span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span>              <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------+------------------+-------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>INET_ATON</span>(<span style=color:#e6db74>&#39;192.168.1.100&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>INET_ATON</span>(<span style=color:#e6db74>&#39;192.168.1.100&#39;</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                 <span style=color:#ae81ff>3232235876</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 以“192.168.1.100”为例，计算方式为192乘以256的3次方，加上168乘以256的2次方，加上1乘以256，再加上100。
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>INET_NTOA</span>(<span style=color:#ae81ff>3232235876</span>);
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>INET_NTOA</span>(<span style=color:#ae81ff>3232235876</span>) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#ae81ff>192</span>.<span style=color:#ae81ff>168</span>.<span style=color:#ae81ff>1</span>.<span style=color:#ae81ff>100</span>         <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+-----------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>BENCHMARK</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>MD5</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>));
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>BENCHMARK</span>(<span style=color:#ae81ff>1</span>, <span style=color:#a6e22e>MD5</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>)) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                          <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>BENCHMARK</span>(<span style=color:#ae81ff>1000000</span>, <span style=color:#a6e22e>MD5</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>)); 
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#a6e22e>BENCHMARK</span>(<span style=color:#ae81ff>1000000</span>, <span style=color:#a6e22e>MD5</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>)) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span>                                <span style=color:#ae81ff>0</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+----------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>20</span> sec)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#66d9ef>CHARSET</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>), <span style=color:#66d9ef>CHARSET</span>(<span style=color:#66d9ef>CONVERT</span>(<span style=color:#e6db74>&#39;mysql&#39;</span> <span style=color:#66d9ef>USING</span> <span style=color:#e6db74>&#39;utf8&#39;</span>));
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------+----------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>CHARSET</span>(<span style=color:#e6db74>&#39;mysql&#39;</span>) <span style=color:#f92672>|</span> <span style=color:#66d9ef>CHARSET</span>(<span style=color:#66d9ef>CONVERT</span>(<span style=color:#e6db74>&#39;mysql&#39;</span> <span style=color:#66d9ef>USING</span> <span style=color:#e6db74>&#39;utf8&#39;</span>)) <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------+----------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> utf8mb4          <span style=color:#f92672>|</span> utf8                                   <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------------------+----------------------------------------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span>, <span style=color:#ae81ff>1</span> <span style=color:#a6e22e>warning</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://jiayi26.github.io/tags/mysql/>MySQL</a></li></ul><nav class=paginav><a class=prev href=https://jiayi26.github.io/posts/%E7%AC%AC10%E7%AB%A0_%E5%88%9B%E5%BB%BA%E5%92%8C%E7%AE%A1%E7%90%86%E8%A1%A8/><span class=title>« Prev Page</span><br><span>创建和管理表</span></a>
<a class=next href=https://jiayi26.github.io/posts/%E7%AC%AC16%E7%AB%A0_%E5%8F%98%E9%87%8F%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E4%B8%8E%E6%B8%B8%E6%A0%87/><span class=title>Next Page »</span><br><span>变量、流程控制与游标</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 单行函数 on twitter" href="https://twitter.com/intent/tweet/?text=%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0&url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f&hashtags=MySQL"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 单行函数 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f&title=%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0&summary=%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0&source=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 单行函数 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f&title=%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 单行函数 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 单行函数 on whatsapp" href="https://api.whatsapp.com/send?text=%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0%20-%20https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 单行函数 on telegram" href="https://telegram.me/share/url?text=%e5%8d%95%e8%a1%8c%e5%87%bd%e6%95%b0&url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC07%25E7%25AB%25A0_%25E5%258D%2595%25E8%25A1%258C%25E5%2587%25BD%25E6%2595%25B0%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://jiayi26.github.io/>JIAYI's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>