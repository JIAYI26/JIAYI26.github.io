<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>数据处理之增删改 | JIAYI's Blog</title><meta name=keywords content="MySQL"><meta name=description content="第11章_数据处理之增删改 1. 插入数据 1.1 实际问题 解决方式：使用 INSERT 语句向表中插入数据。
1.2 方式1：VALUES的方式添加 使用这种语法一次只能向表中插入一条数据。
情况1：为表的所有字段按默认顺序插入数据
INSERT INTO 表名 VALUES (value1,value2,....); 值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。
举例：
INSERT INTO departments VALUES (70, 'Pub', 100, 1700); INSERT INTO	departments VALUES	(100, 'Finance', NULL, NULL); 情况2：为表的指定字段插入数据
INSERT INTO 表名(column1 [, column2, …, columnn]) VALUES (value1 [,value2, …, valuen]); 为表的指定字段插入数据，就是在INSERT语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。
在 INSERT 子句中随意列出列名，但是一旦列出，VALUES中要插入的value1,&mldr;.valuen需要与column1,&mldr;columnn列一一对应。如果类型不同，将无法插入，并且MySQL会产生错误。
举例：
INSERT INTO departments(department_id, department_name) VALUES (80, 'IT'); 情况3：同时插入多条记录
INSERT语句可以同时向数据表中插入多条记录，插入时指定多个值列表，每个值列表之间用逗号分隔开，基本语法格式如下：
INSERT INTO table_name VALUES (value1 [,value2, …, valuen]), (value1 [,value2, …, valuen]), …… (value1 [,value2, …, valuen]); 或者"><meta name=author content="Me"><link rel=canonical href=https://jiayi26.github.io/posts/%E7%AC%AC11%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=icon type=image/png sizes=16x16 href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=icon type=image/png sizes=32x32 href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=apple-touch-icon href=https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3><link rel=mask-icon href=https://jiayi26.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="数据处理之增删改"><meta property="og:description" content="第11章_数据处理之增删改 1. 插入数据 1.1 实际问题 解决方式：使用 INSERT 语句向表中插入数据。
1.2 方式1：VALUES的方式添加 使用这种语法一次只能向表中插入一条数据。
情况1：为表的所有字段按默认顺序插入数据
INSERT INTO 表名 VALUES (value1,value2,....); 值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。
举例：
INSERT INTO departments VALUES (70, 'Pub', 100, 1700); INSERT INTO	departments VALUES	(100, 'Finance', NULL, NULL); 情况2：为表的指定字段插入数据
INSERT INTO 表名(column1 [, column2, …, columnn]) VALUES (value1 [,value2, …, valuen]); 为表的指定字段插入数据，就是在INSERT语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。
在 INSERT 子句中随意列出列名，但是一旦列出，VALUES中要插入的value1,&mldr;.valuen需要与column1,&mldr;columnn列一一对应。如果类型不同，将无法插入，并且MySQL会产生错误。
举例：
INSERT INTO departments(department_id, department_name) VALUES (80, 'IT'); 情况3：同时插入多条记录
INSERT语句可以同时向数据表中插入多条记录，插入时指定多个值列表，每个值列表之间用逗号分隔开，基本语法格式如下：
INSERT INTO table_name VALUES (value1 [,value2, …, valuen]), (value1 [,value2, …, valuen]), …… (value1 [,value2, …, valuen]); 或者"><meta property="og:type" content="article"><meta property="og:url" content="https://jiayi26.github.io/posts/%E7%AC%AC11%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-13T15:29:33+08:00"><meta property="article:modified_time" content="2022-12-13T15:29:33+08:00"><meta property="og:site_name" content="JIAYI's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="数据处理之增删改"><meta name=twitter:description content="第11章_数据处理之增删改 1. 插入数据 1.1 实际问题 解决方式：使用 INSERT 语句向表中插入数据。
1.2 方式1：VALUES的方式添加 使用这种语法一次只能向表中插入一条数据。
情况1：为表的所有字段按默认顺序插入数据
INSERT INTO 表名 VALUES (value1,value2,....); 值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。
举例：
INSERT INTO departments VALUES (70, 'Pub', 100, 1700); INSERT INTO	departments VALUES	(100, 'Finance', NULL, NULL); 情况2：为表的指定字段插入数据
INSERT INTO 表名(column1 [, column2, …, columnn]) VALUES (value1 [,value2, …, valuen]); 为表的指定字段插入数据，就是在INSERT语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。
在 INSERT 子句中随意列出列名，但是一旦列出，VALUES中要插入的value1,&mldr;.valuen需要与column1,&mldr;columnn列一一对应。如果类型不同，将无法插入，并且MySQL会产生错误。
举例：
INSERT INTO departments(department_id, department_name) VALUES (80, 'IT'); 情况3：同时插入多条记录
INSERT语句可以同时向数据表中插入多条记录，插入时指定多个值列表，每个值列表之间用逗号分隔开，基本语法格式如下：
INSERT INTO table_name VALUES (value1 [,value2, …, valuen]), (value1 [,value2, …, valuen]), …… (value1 [,value2, …, valuen]); 或者"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jiayi26.github.io/posts/"},{"@type":"ListItem","position":2,"name":"数据处理之增删改","item":"https://jiayi26.github.io/posts/%E7%AC%AC11%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"数据处理之增删改","name":"数据处理之增删改","description":"第11章_数据处理之增删改 1. 插入数据 1.1 实际问题 解决方式：使用 INSERT 语句向表中插入数据。\n1.2 方式1：VALUES的方式添加 使用这种语法一次只能向表中插入一条数据。\n情况1：为表的所有字段按默认顺序插入数据\nINSERT INTO 表名 VALUES (value1,value2,....); 值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。\n举例：\nINSERT INTO departments VALUES (70, \u0026#39;Pub\u0026#39;, 100, 1700); INSERT INTO\tdepartments VALUES\t(100, \u0026#39;Finance\u0026#39;, NULL, NULL); 情况2：为表的指定字段插入数据\nINSERT INTO 表名(column1 [, column2, …, columnn]) VALUES (value1 [,value2, …, valuen]); 为表的指定字段插入数据，就是在INSERT语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。\n在 INSERT 子句中随意列出列名，但是一旦列出，VALUES中要插入的value1,\u0026hellip;.valuen需要与column1,\u0026hellip;columnn列一一对应。如果类型不同，将无法插入，并且MySQL会产生错误。\n举例：\nINSERT INTO departments(department_id, department_name) VALUES (80, \u0026#39;IT\u0026#39;); 情况3：同时插入多条记录\nINSERT语句可以同时向数据表中插入多条记录，插入时指定多个值列表，每个值列表之间用逗号分隔开，基本语法格式如下：\nINSERT INTO table_name VALUES (value1 [,value2, …, valuen]), (value1 [,value2, …, valuen]), …… (value1 [,value2, …, valuen]); 或者","keywords":["MySQL"],"articleBody":"第11章_数据处理之增删改 1. 插入数据 1.1 实际问题 解决方式：使用 INSERT 语句向表中插入数据。\n1.2 方式1：VALUES的方式添加 使用这种语法一次只能向表中插入一条数据。\n情况1：为表的所有字段按默认顺序插入数据\nINSERT INTO 表名 VALUES (value1,value2,....); 值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。\n举例：\nINSERT INTO departments VALUES (70, 'Pub', 100, 1700); INSERT INTO\tdepartments VALUES\t(100, 'Finance', NULL, NULL); 情况2：为表的指定字段插入数据\nINSERT INTO 表名(column1 [, column2, …, columnn]) VALUES (value1 [,value2, …, valuen]); 为表的指定字段插入数据，就是在INSERT语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。\n在 INSERT 子句中随意列出列名，但是一旦列出，VALUES中要插入的value1,….valuen需要与column1,…columnn列一一对应。如果类型不同，将无法插入，并且MySQL会产生错误。\n举例：\nINSERT INTO departments(department_id, department_name) VALUES (80, 'IT'); 情况3：同时插入多条记录\nINSERT语句可以同时向数据表中插入多条记录，插入时指定多个值列表，每个值列表之间用逗号分隔开，基本语法格式如下：\nINSERT INTO table_name VALUES (value1 [,value2, …, valuen]), (value1 [,value2, …, valuen]), …… (value1 [,value2, …, valuen]); 或者\nINSERT INTO table_name(column1 [, column2, …, columnn]) VALUES (value1 [,value2, …, valuen]), (value1 [,value2, …, valuen]), …… (value1 [,value2, …, valuen]); 举例：\nmysql INSERT INTO emp(emp_id,emp_name)  - VALUES (1001,'shkstart'),  - (1002,'atguigu'),  - (1003,'Tom'); Query OK, 3 rows affected (0.00 sec) Records: 3 Duplicates: 0 Warnings: 0 使用INSERT同时插入多条记录时，MySQL会返回一些在执行单行插入时没有的额外信息，这些信息的含义如下： ●　Records：表明插入的记录条数。 ●　Duplicates：表明插入时被忽略的记录，原因可能是这些记录包含了重复的主键值。 ●　Warnings：表明有问题的数据值，例如发生数据类型转换。\n 一个同时插入多行记录的INSERT语句等同于多个单行插入的INSERT语句，但是多行的INSERT语句在处理过程中效率更高。因为MySQL执行单条INSERT语句插入多行数据比使用多条INSERT语句快，所以在插入多条记录时最好选择使用单条INSERT语句的方式插入。\n 小结：\n  VALUES也可以写成VALUE，但是VALUES是标准写法。\n  字符和日期型数据应包含在单引号中。\n  1.3 方式2：将查询结果插入到表中 INSERT还可以将SELECT语句查询的结果插入到表中，此时不需要把每一条记录的值一个一个输入，只需要使用一条INSERT语句和一条SELECT语句组成的组合语句即可快速地从一个或多个表中向一个表中插入多行。\n基本语法格式如下：\nINSERT INTO 目标表名 (tar_column1 [, tar_column2, …, tar_columnn]) SELECT (src_column1 [, src_column2, …, src_columnn]) FROM 源表名 [WHERE condition]  在 INSERT 语句中加入子查询。 不必书写 VALUES 子句。 子查询中的值列表应与 INSERT 子句中的列名对应。  举例：\nINSERT INTO emp2 SELECT * FROM employees WHERE department_id = 90; INSERT INTO sales_reps(id, name, salary, commission_pct) SELECT employee_id, last_name, salary, commission_pct FROM employees WHERE job_id LIKE '%REP%'; 2. 更新数据  使用 UPDATE 语句更新数据。语法如下：  UPDATE table_name SET column1=value1, column2=value2, … , column=valuen [WHERE condition]   可以一次更新多条数据。\n  如果需要回滚数据，需要保证在DML前，进行设置：SET AUTOCOMMIT = FALSE;\n    使用 WHERE 子句指定需要更新的数据。  UPDATE employees SET department_id = 70 WHERE employee_id = 113;  如果省略 WHERE 子句，则表中的所有数据都将被更新。  UPDATE copy_emp SET department_id = 110;  更新中的数据完整性错误  UPDATE employees SET department_id = 55 WHERE department_id = 110;  说明：不存在 55 号部门\n 3. 删除数据  使用 DELETE 语句从表中删除数据  DELETE FROM table_name [WHERE condition]; table_name指定要执行删除操作的表；“[WHERE ]”为可选参数，指定删除条件，如果没有WHERE子句，DELETE语句将删除表中的所有记录。\n 使用 WHERE 子句删除指定的记录。  DELETE FROM departments WHERE department_name = 'Finance';  如果省略 WHERE 子句，则表中的全部数据将被删除  DELETE FROM copy_emp;  删除中的数据完整性错误  DELETE FROM departments WHERE department_id = 60;  说明：You cannot delete a row that contains a primary key that is used as a foreign key in another table.\n 4. MySQL8新特性：计算列 什么叫计算列呢？简单来说就是某一列的值是通过别的列计算得来的。例如，a列值为1、b列值为2，c列不需要手动插入，定义a+b的结果为c的值，那么c就是计算列，是通过别的列计算得来的。\n在MySQL 8.0中，CREATE TABLE 和 ALTER TABLE 中都支持增加计算列。下面以CREATE TABLE为例进行讲解。\n举例：定义数据表tb1，然后定义字段id、字段a、字段b和字段c，其中字段c为计算列，用于计算a+b的值。 首先创建测试表tb1，语句如下：\nCREATE TABLE tb1( id INT, a INT, b INT, c INT GENERATED ALWAYS AS (a + b) VIRTUAL ); 插入演示数据，语句如下：\nINSERT INTO tb1(a,b) VALUES (100,200); 查询数据表tb1中的数据，结果如下：\nmysql SELECT * FROM tb1; +------+------+------+------+ | id | a | b | c | +------+------+------+------+ | NULL | 100 | 200 | 300 | +------+------+------+------+ 1 row in set (0.00 sec) 更新数据中的数据，语句如下：\nmysql UPDATE tb1 SET a = 500; Query OK, 0 rows affected (0.00 sec) Rows matched: 1 Changed: 0 Warnings: 0 5. 综合案例 # 1、创建数据库test01_library  # 2、创建表 books，表结构如下：    字段名 字段说明 数据类型     id 书编号 INT   name 书名 VARCHAR(50)   authors 作者 VARCHAR(100)   price 价格 FLOAT   pubdate 出版日期 YEAR   note 说明 VARCHAR(100)   num 库存 INT    # 3、向books表中插入记录  # 1）不指定字段名称，插入第一条记录 # 2）指定所有字段名称，插入第二记录 # 3）同时插入多条记录（剩下的所有记录）    id name authors price pubdate note num     1 Tal of AAA Dickes 23 1995 novel 11   2 EmmaT Jane lura 35 1993 joke 22   3 Story of Jane Jane Tim 40 2001 novel 0   4 Lovey Day George Byron 20 2005 novel 30   5 Old land Honore Blade 30 2010 law 0   6 The Battle Upton Sara 30 1999 medicine 40   7 Rose Hood Richard haggard 28 2008 cartoon 28    # 4、将小说类型(novel)的书的价格都增加5。  # 5、将名称为EmmaT的书的价格改为40，并将说明改为drama。  # 6、删除库存为0的记录。 # 7、统计书名中包含a字母的书  # 8、统计书名中包含a字母的书的数量和库存总量  # 9、找出“novel”类型的书，按照价格降序排列  # 10、查询图书信息，按照库存量降序排列，如果库存量相同的按照note升序排列  # 11、按照note分类统计书的数量  # 12、按照note分类统计书的库存量，显示库存量超过30本的  # 13、查询所有图书，每页显示5本，显示第二页  # 14、按照note分类统计书的库存量，显示库存量最多的  # 15、查询书名达到10个字符的书，不包括里面的空格  # 16、查询书名和类型，其中note值为novel显示小说，law显示法律，medicine显示医药，cartoon显示卡通，joke显示笑话  # 17、查询书名、库存，其中num值超过30本的，显示滞销，大于0并低于10的，显示畅销，为0的显示需要无货  # 18、统计每一种note的库存量，并合计总量  # 19、统计每一种note的数量，并合计总量  # 20、统计库存量前三名的图书  # 21、找出最早出版的一本书  # 22、找出novel中价格最高的一本书  # 23、找出书名中字数最多的一本书，不含空格 答案：\n#1、创建数据库test01_library CREATE DATABASE IF NOT EXISTS test01_library CHARACTER SET 'utf8';  #指定使用哪个数据库 USE test01_library;  #2、创建表 books CREATE TABLE books( \tid INT, \tname VARCHAR(50), \t`authors` VARCHAR(100) , \tprice FLOAT, \tpubdate YEAR , \tnote VARCHAR(100), \tnum INT );  #3、向books表中插入记录 # 1）不指定字段名称，插入第一条记录 INSERT INTO books VALUES(1,'Tal of AAA','Dickes',23,1995,'novel',11); # 2）指定所有字段名称，插入第二记录 INSERT INTO books (id,name,`authors`,price,pubdate,note,num) VALUES(2,'EmmaT','Jane lura',35,1993,'Joke',22); # 3）同时插入多条记录（剩下的所有记录） INSERT INTO books (id,name,`authors`,price,pubdate,note,num) VALUES (3,'Story of Jane','Jane Tim',40,2001,'novel',0), (4,'Lovey Day','George Byron',20,2005,'novel',30), (5,'Old land','Honore Blade',30,2010,'Law',0), (6,'The Battle','Upton Sara',30,1999,'medicine',40), (7,'Rose Hood','Richard haggard',28,2008,'cartoon',28);  # 4、将小说类型(novel)的书的价格都增加5。 UPDATE books SET price=price+5 WHERE note = 'novel';  # 5、将名称为EmmaT的书的价格改为40，并将说明改为drama。 UPDATE books SET price=40,note='drama' WHERE name='EmmaT';  # 6、删除库存为0的记录。 DELETE FROM books WHERE num=0; # 7、统计书名中包含a字母的书 SELECT * FROM books WHERE name LIKE '%a%';  # 8、统计书名中包含a字母的书的数量和库存总量 SELECT COUNT(*),SUM(num) FROM books WHERE name LIKE '%a%';  # 9、找出“novel”类型的书，按照价格降序排列 SELECT * FROM books WHERE note = 'novel' ORDER BY price DESC;  # 10、查询图书信息，按照库存量降序排列，如果库存量相同的按照note升序排列 SELECT * FROM books ORDER BY num DESC,note ASC;  # 11、按照note分类统计书的数量 SELECT note,COUNT(*) FROM books GROUP BY note;  # 12、按照note分类统计书的库存量，显示库存量超过30本的 SELECT note,SUM(num) FROM books GROUP BY note HAVING SUM(num)30;  # 13、查询所有图书，每页显示5本，显示第二页 SELECT * FROM books LIMIT 5,5;  # 14、按照note分类统计书的库存量，显示库存量最多的 SELECT note,SUM(num) sum_num FROM books GROUP BY note ORDER BY sum_num DESC LIMIT 0,1;  # 15、查询书名达到10个字符的书，不包括里面的空格 SELECT * FROM books WHERE CHAR_LENGTH(REPLACE(name,' ',''))=10;  /* 16、查询书名和类型， 其中note值为 novel显示小说，law显示法律，medicine显示医药，cartoon显示卡通，joke显示笑话 */ SELECT name AS \"书名\" ,note, CASE note  WHEN 'novel' THEN '小说'  WHEN 'law' THEN '法律'  WHEN 'medicine' THEN '医药'  WHEN 'cartoon' THEN '卡通'  WHEN 'joke' THEN '笑话'  END AS \"类型\" FROM books;   # 17、查询书名、库存，其中num值超过30本的，显示滞销，大于0并低于10的，显示畅销，为0的显示需要无货 SELECT name,num,CASE  WHEN num30 THEN '滞销'  WHEN num0 AND num10 THEN '畅销'  WHEN num=0 THEN '无货'  ELSE '正常'  END AS \"库存状态\" FROM books;  # 18、统计每一种note的库存量，并合计总量 SELECT IFNULL(note,'合计总库存量') AS note,SUM(num) FROM books GROUP BY note WITH ROLLUP;  # 19、统计每一种note的数量，并合计总量 SELECT IFNULL(note,'合计总数') AS note,COUNT(*) FROM books GROUP BY note WITH ROLLUP;  # 20、统计库存量前三名的图书 SELECT * FROM books ORDER BY num DESC LIMIT 0,3;  # 21、找出最早出版的一本书 SELECT * FROM books ORDER BY pubdate ASC LIMIT 0,1;  # 22、找出novel中价格最高的一本书 SELECT * FROM books WHERE note = 'novel' ORDER BY price DESC LIMIT 0,1;  # 23、找出书名中字数最多的一本书，不含空格 SELECT * FROM books ORDER BY CHAR_LENGTH(REPLACE(name,' ','')) DESC LIMIT 0,1; ","wordCount":"891","inLanguage":"en","datePublished":"2022-12-13T15:29:33+08:00","dateModified":"2022-12-13T15:29:33+08:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jiayi26.github.io/posts/%E7%AC%AC11%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B9%8B%E5%A2%9E%E5%88%A0%E6%94%B9/"},"publisher":{"@type":"Organization","name":"JIAYI's Blog","logo":{"@type":"ImageObject","url":"https://xx.mzqcgc.cn/FrbOmxJvq96XDbDPXbiBWM0LU9e3"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jiayi26.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://jiayi26.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://jiayi26.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jiayi26.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://jiayi26.github.io/posts/>Posts</a></div><h1 class=post-title>数据处理之增删改</h1><div class=post-meta><span title="2022-12-13 15:29:33 +0800 CST">December 13, 2022</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/Pass-JIAYI%27s.github.io/post/posts/%e7%ac%ac11%e7%ab%a0_%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><h1 id=第11章_数据处理之增删改>第11章_数据处理之增删改<a hidden class=anchor aria-hidden=true href=#第11章_数据处理之增删改>#</a></h1><h2 id=1-插入数据>1. 插入数据<a hidden class=anchor aria-hidden=true href=#1-插入数据>#</a></h2><h3 id=11-实际问题>1.1 实际问题<a hidden class=anchor aria-hidden=true href=#11-实际问题>#</a></h3><p>解决方式：使用 INSERT 语句向表中插入数据。</p><h3 id=12-方式1values的方式添加>1.2 方式1：VALUES的方式添加<a hidden class=anchor aria-hidden=true href=#12-方式1values的方式添加>#</a></h3><p>使用这种语法一次只能向表中插入<strong>一条</strong>数据。</p><p><strong>情况1：为表的所有字段按默认顺序插入数据</strong></p><pre tabindex=0><code>INSERT INTO 表名
VALUES (value1,value2,....);
</code></pre><p>值列表中需要为表的每一个字段指定值，并且值的顺序必须和数据表中字段定义时的顺序相同。</p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> departments
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>70</span>, <span style=color:#e6db74>&#39;Pub&#39;</span>, <span style=color:#ae81ff>100</span>, <span style=color:#ae81ff>1700</span>);
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span>	departments
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span>		(<span style=color:#ae81ff>100</span>, <span style=color:#e6db74>&#39;Finance&#39;</span>, <span style=color:#66d9ef>NULL</span>, <span style=color:#66d9ef>NULL</span>);
</span></span></code></pre></div><p><strong>情况2：为表的指定字段插入数据</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#960050;background-color:#1e0010>表名</span>(column1 [, column2, <span style=color:#960050;background-color:#1e0010>…</span>, columnn]) 
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]);
</span></span></code></pre></div><p>为表的指定字段插入数据，就是在INSERT语句中只向部分字段中插入值，而其他字段的值为表定义时的默认值。</p><p>在 INSERT 子句中随意列出列名，但是一旦列出，VALUES中要插入的value1,&mldr;.valuen需要与column1,&mldr;columnn列一一对应。如果类型不同，将无法插入，并且MySQL会产生错误。</p><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>departments</span>(department_id, department_name)
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>80</span>, <span style=color:#e6db74>&#39;IT&#39;</span>);
</span></span></code></pre></div><p><strong>情况3：同时插入多条记录</strong></p><p>INSERT语句可以同时向数据表中插入多条记录，插入时指定多个值列表，每个值列表之间用逗号分隔开，基本语法格式如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> table_name 
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> 
</span></span><span style=display:flex><span>(value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]),
</span></span><span style=display:flex><span>(value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]),
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>……</span>
</span></span><span style=display:flex><span>(value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]);
</span></span></code></pre></div><p>或者</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>table_name</span>(column1 [, column2, <span style=color:#960050;background-color:#1e0010>…</span>, columnn]) 
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span> 
</span></span><span style=display:flex><span>(value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]),
</span></span><span style=display:flex><span>(value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]),
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>……</span>
</span></span><span style=display:flex><span>(value1 [,value2, <span style=color:#960050;background-color:#1e0010>…</span>, valuen]);
</span></span></code></pre></div><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>emp</span>(emp_id,emp_name)
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>1001</span>,<span style=color:#e6db74>&#39;shkstart&#39;</span>),
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> (<span style=color:#ae81ff>1002</span>,<span style=color:#e6db74>&#39;atguigu&#39;</span>),
</span></span><span style=display:flex><span>    <span style=color:#f92672>-&gt;</span> (<span style=color:#ae81ff>1003</span>,<span style=color:#e6db74>&#39;Tom&#39;</span>);
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>3</span> rows <span style=color:#a6e22e>affected</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>Records: <span style=color:#ae81ff>3</span>  Duplicates: <span style=color:#ae81ff>0</span>  Warnings: <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><p>使用INSERT同时插入多条记录时，MySQL会返回一些在执行单行插入时没有的额外信息，这些信息的含义如下：
●　Records：表明插入的记录条数。
●　Duplicates：表明插入时被忽略的记录，原因可能是这些记录包含了重复的主键值。
●　Warnings：表明有问题的数据值，例如发生数据类型转换。</p><blockquote><p>一个同时插入多行记录的INSERT语句等同于多个单行插入的INSERT语句，但是多行的INSERT语句在处理过程中<code>效率更高</code>。因为MySQL执行单条INSERT语句插入多行数据比使用多条INSERT语句快，所以在插入多条记录时最好选择使用单条INSERT语句的方式插入。</p></blockquote><p><strong>小结：</strong></p><ul><li><p><code>VALUES</code>也可以写成<code>VALUE</code>，但是VALUES是标准写法。</p></li><li><p>字符和日期型数据应包含在单引号中。</p></li></ul><h3 id=13-方式2将查询结果插入到表中>1.3 方式2：将查询结果插入到表中<a hidden class=anchor aria-hidden=true href=#13-方式2将查询结果插入到表中>#</a></h3><p>INSERT还可以将SELECT语句查询的结果插入到表中，此时不需要把每一条记录的值一个一个输入，只需要使用一条INSERT语句和一条SELECT语句组成的组合语句即可快速地从一个或多个表中向一个表中插入多行。</p><p>基本语法格式如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#960050;background-color:#1e0010>目标表名</span>
</span></span><span style=display:flex><span>(tar_column1 [, tar_column2, <span style=color:#960050;background-color:#1e0010>…</span>, tar_columnn])
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span>
</span></span><span style=display:flex><span>(src_column1 [, src_column2, <span style=color:#960050;background-color:#1e0010>…</span>, src_columnn])
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> <span style=color:#960050;background-color:#1e0010>源表名</span>
</span></span><span style=display:flex><span>[<span style=color:#66d9ef>WHERE</span> <span style=color:#66d9ef>condition</span>]
</span></span></code></pre></div><ul><li>在 INSERT 语句中加入子查询。</li><li><strong>不必书写</strong> <strong>VALUES</strong> <strong>子句。</strong></li><li>子查询中的值列表应与 INSERT 子句中的列名对应。</li></ul><p>举例：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> emp2 
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> employees
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span> department_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>90</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> sales_reps(id, name, salary, commission_pct)
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> employee_id, last_name, salary, commission_pct
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span>   employees
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  job_id <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%REP%&#39;</span>;
</span></span></code></pre></div><h2 id=2-更新数据>2. 更新数据<a hidden class=anchor aria-hidden=true href=#2-更新数据>#</a></h2><p><img loading=lazy src=../_resources/1555425824246.png alt=1555425824246></p><ul><li>使用 UPDATE 语句更新数据。语法如下：</li></ul><pre tabindex=0><code>UPDATE table_name
SET column1=value1, column2=value2, … , column=valuen
[WHERE condition]
</code></pre><ul><li><p>可以一次更新<strong>多条</strong>数据。</p></li><li><p>如果需要回滚数据，需要保证在DML前，进行设置：<strong>SET AUTOCOMMIT = FALSE;</strong></p></li></ul><hr><ul><li>使用 <strong>WHERE</strong> 子句指定需要更新的数据。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> employees
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span>    department_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>70</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  employee_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>113</span>;
</span></span></code></pre></div><ul><li>如果省略 WHERE 子句，则表中的所有数据都将被更新。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> 	copy_emp
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span>    	department_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>110</span>;
</span></span></code></pre></div><ul><li><strong>更新中的数据完整性错误</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>UPDATE</span> employees
</span></span><span style=display:flex><span><span style=color:#66d9ef>SET</span>    department_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>55</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  department_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>110</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/1555426069578.png alt=1555426069578></p><blockquote><p>说明：不存在 55 号部门</p></blockquote><h2 id=3-删除数据>3. 删除数据<a hidden class=anchor aria-hidden=true href=#3-删除数据>#</a></h2><p><img loading=lazy src=../_resources/1555426124751.png alt=1555426124751></p><ul><li>使用 DELETE 语句从表中删除数据</li></ul><p><img loading=lazy src=../_resources/1555426162264.png alt=1555426162264></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> table_name [<span style=color:#66d9ef>WHERE</span> <span style=color:#f92672>&lt;</span><span style=color:#66d9ef>condition</span><span style=color:#f92672>&gt;</span>];
</span></span></code></pre></div><p>table_name指定要执行删除操作的表；“[WHERE ]”为可选参数，指定删除条件，如果没有WHERE子句，DELETE语句将删除表中的所有记录。</p><ul><li>使用 WHERE 子句删除指定的记录。</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> departments
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>  department_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;Finance&#39;</span>;
</span></span></code></pre></div><ul><li>如果省略 WHERE 子句，则表中的全部数据将被删除</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span>  copy_emp;
</span></span></code></pre></div><ul><li><strong>删除中的数据完整性错误</strong></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql><span style=display:flex><span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> departments
</span></span><span style=display:flex><span><span style=color:#66d9ef>WHERE</span>       department_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>60</span>;
</span></span></code></pre></div><p><img loading=lazy src=../_resources/1555426258516.png alt=1555426258516></p><blockquote><p>说明：You cannot delete a row that contains a primary key that is used as a foreign key in another table.</p></blockquote><h2 id=4-mysql8新特性计算列>4. MySQL8新特性：计算列<a hidden class=anchor aria-hidden=true href=#4-mysql8新特性计算列>#</a></h2><p>什么叫计算列呢？简单来说就是某一列的值是通过别的列计算得来的。例如，a列值为1、b列值为2，c列不需要手动插入，定义a+b的结果为c的值，那么c就是计算列，是通过别的列计算得来的。</p><p>在MySQL 8.0中，CREATE TABLE 和 ALTER TABLE 中都支持增加计算列。下面以CREATE TABLE为例进行讲解。</p><p>举例：定义数据表tb1，然后定义字段id、字段a、字段b和字段c，其中字段c为计算列，用于计算a+b的值。
首先创建测试表tb1，语句如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>tb1</span>(
</span></span><span style=display:flex><span>id <span style=color:#66d9ef>INT</span>,
</span></span><span style=display:flex><span>a <span style=color:#66d9ef>INT</span>,
</span></span><span style=display:flex><span>b <span style=color:#66d9ef>INT</span>,
</span></span><span style=display:flex><span>c <span style=color:#66d9ef>INT</span> GENERATED ALWAYS <span style=color:#66d9ef>AS</span> (a <span style=color:#f92672>+</span> b) VIRTUAL
</span></span><span style=display:flex><span>);
</span></span></code></pre></div><p>插入演示数据，语句如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>tb1</span>(a,b) <span style=color:#66d9ef>VALUES</span> (<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>200</span>);
</span></span></code></pre></div><p>查询数据表tb1中的数据，结果如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> tb1;
</span></span><span style=display:flex><span><span style=color:#f92672>+------+------+------+------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> id   <span style=color:#f92672>|</span> a    <span style=color:#f92672>|</span> b    <span style=color:#f92672>|</span> c    <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------+------+------+------+</span>
</span></span><span style=display:flex><span><span style=color:#f92672>|</span> <span style=color:#66d9ef>NULL</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>100</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>200</span> <span style=color:#f92672>|</span>  <span style=color:#ae81ff>300</span> <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>+------+------+------+------+</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> row <span style=color:#66d9ef>in</span> <span style=color:#66d9ef>set</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span></code></pre></div><p>更新数据中的数据，语句如下：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>UPDATE</span> tb1 <span style=color:#66d9ef>SET</span> a <span style=color:#f92672>=</span> <span style=color:#ae81ff>500</span>;
</span></span><span style=display:flex><span>Query OK, <span style=color:#ae81ff>0</span> rows <span style=color:#a6e22e>affected</span> (<span style=color:#ae81ff>0</span>.<span style=color:#ae81ff>00</span> sec)
</span></span><span style=display:flex><span>Rows matched: <span style=color:#ae81ff>1</span>  Changed: <span style=color:#ae81ff>0</span>  Warnings: <span style=color:#ae81ff>0</span>
</span></span></code></pre></div><h2 id=5-综合案例>5. 综合案例<a hidden class=anchor aria-hidden=true href=#5-综合案例>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e># 1、创建数据库test01_library
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2、创建表 books，表结构如下：
</span></span></span></code></pre></div><table><thead><tr><th>字段名</th><th>字段说明</th><th>数据类型</th></tr></thead><tbody><tr><td>id</td><td>书编号</td><td>INT</td></tr><tr><td>name</td><td>书名</td><td>VARCHAR(50)</td></tr><tr><td>authors</td><td>作者</td><td>VARCHAR(100)</td></tr><tr><td>price</td><td>价格</td><td>FLOAT</td></tr><tr><td>pubdate</td><td>出版日期</td><td>YEAR</td></tr><tr><td>note</td><td>说明</td><td>VARCHAR(100)</td></tr><tr><td>num</td><td>库存</td><td>INT</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e># 3、向books表中插入记录
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1）不指定字段名称，插入第一条记录
</span></span></span><span style=display:flex><span><span style=color:#75715e># 2）指定所有字段名称，插入第二记录
</span></span></span><span style=display:flex><span><span style=color:#75715e># 3）同时插入多条记录（剩下的所有记录）
</span></span></span></code></pre></div><table><thead><tr><th>id</th><th>name</th><th>authors</th><th>price</th><th>pubdate</th><th>note</th><th>num</th></tr></thead><tbody><tr><td>1</td><td>Tal of AAA</td><td>Dickes</td><td>23</td><td>1995</td><td>novel</td><td>11</td></tr><tr><td>2</td><td>EmmaT</td><td>Jane lura</td><td>35</td><td>1993</td><td>joke</td><td>22</td></tr><tr><td>3</td><td>Story of Jane</td><td>Jane Tim</td><td>40</td><td>2001</td><td>novel</td><td>0</td></tr><tr><td>4</td><td>Lovey Day</td><td>George Byron</td><td>20</td><td>2005</td><td>novel</td><td>30</td></tr><tr><td>5</td><td>Old land</td><td>Honore Blade</td><td>30</td><td>2010</td><td>law</td><td>0</td></tr><tr><td>6</td><td>The Battle</td><td>Upton Sara</td><td>30</td><td>1999</td><td>medicine</td><td>40</td></tr><tr><td>7</td><td>Rose Hood</td><td>Richard haggard</td><td>28</td><td>2008</td><td>cartoon</td><td>28</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e># 4、将小说类型(novel)的书的价格都增加5。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5、将名称为EmmaT的书的价格改为40，并将说明改为drama。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 6、删除库存为0的记录。
</span></span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e># 7、统计书名中包含a字母的书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 8、统计书名中包含a字母的书的数量和库存总量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 9、找出“novel”类型的书，按照价格降序排列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 10、查询图书信息，按照库存量降序排列，如果库存量相同的按照note升序排列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 11、按照note分类统计书的数量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 12、按照note分类统计书的库存量，显示库存量超过30本的
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 13、查询所有图书，每页显示5本，显示第二页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 14、按照note分类统计书的库存量，显示库存量最多的
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 15、查询书名达到10个字符的书，不包括里面的空格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 16、查询书名和类型，其中note值为novel显示小说，law显示法律，medicine显示医药，cartoon显示卡通，joke显示笑话
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 17、查询书名、库存，其中num值超过30本的，显示滞销，大于0并低于10的，显示畅销，为0的显示需要无货
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 18、统计每一种note的库存量，并合计总量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 19、统计每一种note的数量，并合计总量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 20、统计库存量前三名的图书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 21、找出最早出版的一本书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 22、找出novel中价格最高的一本书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># 23、找出书名中字数最多的一本书，不含空格
</span></span></span></code></pre></div><p>答案：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e>#1、创建数据库test01_library
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>DATABASE</span> <span style=color:#66d9ef>IF</span> <span style=color:#66d9ef>NOT</span> <span style=color:#66d9ef>EXISTS</span> test01_library <span style=color:#66d9ef>CHARACTER</span> <span style=color:#66d9ef>SET</span> <span style=color:#e6db74>&#39;utf8&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#指定使用哪个数据库
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>USE</span> test01_library;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#2、创建表 books
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>CREATE</span> <span style=color:#66d9ef>TABLE</span> <span style=color:#a6e22e>books</span>(
</span></span><span style=display:flex><span>	id <span style=color:#66d9ef>INT</span>,
</span></span><span style=display:flex><span>	name <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>50</span>),
</span></span><span style=display:flex><span>	<span style=color:#f92672>`</span>authors<span style=color:#f92672>`</span> <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>100</span>) ,
</span></span><span style=display:flex><span>	price <span style=color:#66d9ef>FLOAT</span>,
</span></span><span style=display:flex><span>	pubdate <span style=color:#66d9ef>YEAR</span> ,
</span></span><span style=display:flex><span>	note <span style=color:#66d9ef>VARCHAR</span>(<span style=color:#ae81ff>100</span>),
</span></span><span style=display:flex><span>	num <span style=color:#66d9ef>INT</span>
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>#3、向books表中插入记录
</span></span></span><span style=display:flex><span><span style=color:#75715e># 1）不指定字段名称，插入第一条记录
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> books 
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>1</span>,<span style=color:#e6db74>&#39;Tal of AAA&#39;</span>,<span style=color:#e6db74>&#39;Dickes&#39;</span>,<span style=color:#ae81ff>23</span>,<span style=color:#ae81ff>1995</span>,<span style=color:#e6db74>&#39;novel&#39;</span>,<span style=color:#ae81ff>11</span>);
</span></span><span style=display:flex><span><span style=color:#75715e># 2）指定所有字段名称，插入第二记录
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>books</span> (id,name,<span style=color:#f92672>`</span>authors<span style=color:#f92672>`</span>,price,pubdate,note,num)
</span></span><span style=display:flex><span><span style=color:#66d9ef>VALUES</span>(<span style=color:#ae81ff>2</span>,<span style=color:#e6db74>&#39;EmmaT&#39;</span>,<span style=color:#e6db74>&#39;Jane lura&#39;</span>,<span style=color:#ae81ff>35</span>,<span style=color:#ae81ff>1993</span>,<span style=color:#e6db74>&#39;Joke&#39;</span>,<span style=color:#ae81ff>22</span>);
</span></span><span style=display:flex><span><span style=color:#75715e># 3）同时插入多条记录（剩下的所有记录）
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>INSERT</span> <span style=color:#66d9ef>INTO</span> <span style=color:#a6e22e>books</span> (id,name,<span style=color:#f92672>`</span>authors<span style=color:#f92672>`</span>,price,pubdate,note,num) <span style=color:#66d9ef>VALUES</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>3</span>,<span style=color:#e6db74>&#39;Story of Jane&#39;</span>,<span style=color:#e6db74>&#39;Jane Tim&#39;</span>,<span style=color:#ae81ff>40</span>,<span style=color:#ae81ff>2001</span>,<span style=color:#e6db74>&#39;novel&#39;</span>,<span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>4</span>,<span style=color:#e6db74>&#39;Lovey Day&#39;</span>,<span style=color:#e6db74>&#39;George Byron&#39;</span>,<span style=color:#ae81ff>20</span>,<span style=color:#ae81ff>2005</span>,<span style=color:#e6db74>&#39;novel&#39;</span>,<span style=color:#ae81ff>30</span>),
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>5</span>,<span style=color:#e6db74>&#39;Old land&#39;</span>,<span style=color:#e6db74>&#39;Honore Blade&#39;</span>,<span style=color:#ae81ff>30</span>,<span style=color:#ae81ff>2010</span>,<span style=color:#e6db74>&#39;Law&#39;</span>,<span style=color:#ae81ff>0</span>),
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>6</span>,<span style=color:#e6db74>&#39;The Battle&#39;</span>,<span style=color:#e6db74>&#39;Upton Sara&#39;</span>,<span style=color:#ae81ff>30</span>,<span style=color:#ae81ff>1999</span>,<span style=color:#e6db74>&#39;medicine&#39;</span>,<span style=color:#ae81ff>40</span>),
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>7</span>,<span style=color:#e6db74>&#39;Rose Hood&#39;</span>,<span style=color:#e6db74>&#39;Richard haggard&#39;</span>,<span style=color:#ae81ff>28</span>,<span style=color:#ae81ff>2008</span>,<span style=color:#e6db74>&#39;cartoon&#39;</span>,<span style=color:#ae81ff>28</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 4、将小说类型(novel)的书的价格都增加5。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>UPDATE</span> books <span style=color:#66d9ef>SET</span> price<span style=color:#f92672>=</span>price<span style=color:#f92672>+</span><span style=color:#ae81ff>5</span> <span style=color:#66d9ef>WHERE</span> note <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;novel&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 5、将名称为EmmaT的书的价格改为40，并将说明改为drama。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>UPDATE</span> books <span style=color:#66d9ef>SET</span> price<span style=color:#f92672>=</span><span style=color:#ae81ff>40</span>,note<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;drama&#39;</span> <span style=color:#66d9ef>WHERE</span> name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;EmmaT&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 6、删除库存为0的记录。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>DELETE</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> num<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-mysql data-lang=mysql><span style=display:flex><span><span style=color:#75715e># 7、统计书名中包含a字母的书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%a%&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 8、统计书名中包含a字母的书的数量和库存总量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>),<span style=color:#a6e22e>SUM</span>(num) <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> name <span style=color:#66d9ef>LIKE</span> <span style=color:#e6db74>&#39;%a%&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 9、找出“novel”类型的书，按照价格降序排列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> note <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;novel&#39;</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> price <span style=color:#66d9ef>DESC</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 10、查询图书信息，按照库存量降序排列，如果库存量相同的按照note升序排列
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> num <span style=color:#66d9ef>DESC</span>,note <span style=color:#66d9ef>ASC</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 11、按照note分类统计书的数量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> note,<span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> note;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 12、按照note分类统计书的库存量，显示库存量超过30本的
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> note,<span style=color:#a6e22e>SUM</span>(num) <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> note <span style=color:#66d9ef>HAVING</span> <span style=color:#a6e22e>SUM</span>(num)<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>30</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 13、查询所有图书，每页显示5本，显示第二页
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>5</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 14、按照note分类统计书的库存量，显示库存量最多的
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> note,<span style=color:#a6e22e>SUM</span>(num) sum_num <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> note <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> sum_num <span style=color:#66d9ef>DESC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 15、查询书名达到10个字符的书，不包括里面的空格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> <span style=color:#a6e22e>CHAR_LENGTH</span>(<span style=color:#66d9ef>REPLACE</span>(name,<span style=color:#e6db74>&#39; &#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>))<span style=color:#f92672>&gt;=</span><span style=color:#ae81ff>10</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>16、查询书名和类型，
</span></span></span><span style=display:flex><span><span style=color:#75715e> 其中note值为 novel显示小说，law显示法律，medicine显示医药，cartoon显示卡通，joke显示笑话
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>SELECT</span> name <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#34;书名&#34;</span> ,note, <span style=color:#66d9ef>CASE</span> note 
</span></span><span style=display:flex><span> <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;novel&#39;</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;小说&#39;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;law&#39;</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;法律&#39;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;medicine&#39;</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;医药&#39;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;cartoon&#39;</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;卡通&#39;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>WHEN</span> <span style=color:#e6db74>&#39;joke&#39;</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;笑话&#39;</span>
</span></span><span style=display:flex><span> END <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#34;类型&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> books;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 17、查询书名、库存，其中num值超过30本的，显示滞销，大于0并低于10的，显示畅销，为0的显示需要无货
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> name,num,<span style=color:#66d9ef>CASE</span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>WHEN</span> num<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>30</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;滞销&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>WHEN</span> num<span style=color:#f92672>&gt;</span><span style=color:#ae81ff>0</span> <span style=color:#66d9ef>AND</span> num<span style=color:#f92672>&lt;</span><span style=color:#ae81ff>10</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;畅销&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>WHEN</span> num<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> <span style=color:#66d9ef>THEN</span> <span style=color:#e6db74>&#39;无货&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>ELSE</span> <span style=color:#e6db74>&#39;正常&#39;</span>
</span></span><span style=display:flex><span>  END <span style=color:#66d9ef>AS</span> <span style=color:#e6db74>&#34;库存状态&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>FROM</span> books;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 18、统计每一种note的库存量，并合计总量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>IFNULL</span>(note,<span style=color:#e6db74>&#39;合计总库存量&#39;</span>) <span style=color:#66d9ef>AS</span> note,<span style=color:#a6e22e>SUM</span>(num) <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> note <span style=color:#66d9ef>WITH</span> ROLLUP;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 19、统计每一种note的数量，并合计总量
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#a6e22e>IFNULL</span>(note,<span style=color:#e6db74>&#39;合计总数&#39;</span>) <span style=color:#66d9ef>AS</span> note,<span style=color:#a6e22e>COUNT</span>(<span style=color:#f92672>*</span>) <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>GROUP</span> <span style=color:#66d9ef>BY</span> note <span style=color:#66d9ef>WITH</span> ROLLUP;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 20、统计库存量前三名的图书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> num <span style=color:#66d9ef>DESC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>3</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 21、找出最早出版的一本书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> pubdate <span style=color:#66d9ef>ASC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 22、找出novel中价格最高的一本书
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>WHERE</span> note <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;novel&#39;</span> <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> price <span style=color:#66d9ef>DESC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 23、找出书名中字数最多的一本书，不含空格
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>SELECT</span> <span style=color:#f92672>*</span> <span style=color:#66d9ef>FROM</span> books <span style=color:#66d9ef>ORDER</span> <span style=color:#66d9ef>BY</span> <span style=color:#a6e22e>CHAR_LENGTH</span>(<span style=color:#66d9ef>REPLACE</span>(name,<span style=color:#e6db74>&#39; &#39;</span>,<span style=color:#e6db74>&#39;&#39;</span>)) <span style=color:#66d9ef>DESC</span> <span style=color:#66d9ef>LIMIT</span> <span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>1</span>;
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://jiayi26.github.io/tags/mysql/>MySQL</a></li></ul><nav class=paginav><a class=prev href=https://jiayi26.github.io/posts/%E7%AC%AC05%E7%AB%A0_%E6%8E%92%E5%BA%8F%E4%B8%8E%E5%88%86%E9%A1%B5/><span class=title>« Prev Page</span><br><span>排序与分页</span></a>
<a class=next href=https://jiayi26.github.io/posts/%E7%AC%AC01%E7%AB%A0_%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0/><span class=title>Next Page »</span><br><span>数据库概述</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 数据处理之增删改 on twitter" href="https://twitter.com/intent/tweet/?text=%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9&url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f&hashtags=MySQL"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 数据处理之增删改 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f&title=%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9&summary=%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9&source=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 数据处理之增删改 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f&title=%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 数据处理之增删改 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 数据处理之增删改 on whatsapp" href="https://api.whatsapp.com/send?text=%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9%20-%20https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share 数据处理之增删改 on telegram" href="https://telegram.me/share/url?text=%e6%95%b0%e6%8d%ae%e5%a4%84%e7%90%86%e4%b9%8b%e5%a2%9e%e5%88%a0%e6%94%b9&url=https%3a%2f%2fjiayi26.github.io%2fposts%2f%25E7%25AC%25AC11%25E7%25AB%25A0_%25E6%2595%25B0%25E6%258D%25AE%25E5%25A4%2584%25E7%2590%2586%25E4%25B9%258B%25E5%25A2%259E%25E5%2588%25A0%25E6%2594%25B9%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://jiayi26.github.io/>JIAYI's Blog</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>